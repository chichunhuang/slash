

重建database的script:

```
drop database ecrf;
CREATE DATABASE ecrf
  WITH ENCODING='UNICODE'
       OWNER=ecrf
       TEMPLATE=template0
       TABLESPACE=ecrf;
ALTER SCHEMA public OWNER TO ecrf;
```
執行 sql script
```
psql -U postgres -f rebuild.sql

```

備份
```
pg_dump -U ecrf -F t -b -v -f ecrf1.tar ecrf
```


回存
```
pg_restore -U ecrf -F t -d ecrf -i -v ecrf.tar
```

較低版本的 pg_dump 無法對較高版本的 postgresql 進行備份.
較低版本的 pg_restore 無法對較高版本的 postgresql 進行回存.

利用命令列備份與回存可以在終端上看到程序的進度,比較能夠瞭解是否仍在進行;如果使用pgadmin,則無法看到這些訊息.

如果一定要在版本較低的伺服器上回存版本較高的資料,例如在8.2上回存8.4或9.1的資料,在來源主機上執行pg_dump時,-F參數後面改用p,代表dump成sql script.在目的主機上執行這個步驟所產生出來的restore.sql即可.