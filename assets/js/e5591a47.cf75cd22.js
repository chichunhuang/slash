"use strict";(globalThis.webpackChunkinsect_totem=globalThis.webpackChunkinsect_totem||[]).push([[9710],{28453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>o});var t=r(96540);const s={},i=t.createContext(s);function a(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(i.Provider,{value:n},e.children)}},38450:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"Java/Spring/Spring_Remoting_Web_Service","title":"Spring Restful API \u53d6\u503c\u7df4\u7fd2","description":"Spring Remoting and Web Service","source":"@site/docs/110_Java/30_Spring/Spring_Remoting_Web_Service.md","sourceDirName":"110_Java/30_Spring","slug":"/Java/Spring/Spring_Remoting_Web_Service","permalink":"/docs/Java/Spring/Spring_Remoting_Web_Service","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Spring Restful API \u53d6\u503c\u7df4\u7fd2","description":"Spring Remoting and Web Service","keywords":["Spring","Restful API"]},"sidebar":"totem_sidebar","previous":{"title":"Spring Properties to Map by @Resource","permalink":"/docs/Java/Spring/Spring_Property_inject_AtResource_to_Map"},"next":{"title":"Spring Restful API \u7df4\u7fd2","permalink":"/docs/Java/Spring/Spring_Restful"}}');var s=r(74848),i=r(28453);const a={title:"Spring Restful API \u53d6\u503c\u7df4\u7fd2",description:"Spring Remoting and Web Service",keywords:["Spring","Restful API"]},o=void 0,l={},c=[{value:"Dependencies",id:"dependencies",level:2},{value:"\u5411 RESTful server \u53d6 String \u8cc7\u6599",id:"\u5411-restful-server-\u53d6-string-\u8cc7\u6599",level:2},{value:"\u5411 RESTful server \u53d6 POJO \u8cc7\u6599",id:"\u5411-restful-server-\u53d6-pojo-\u8cc7\u6599",level:2},{value:"\u5411 RESTful server \u53d6\u96c6\u5408\u8cc7\u6599",id:"\u5411-restful-server-\u53d6\u96c6\u5408\u8cc7\u6599",level:2},{value:"\u5411 RESTful server \u53d6 xml \u8cc7\u6599",id:"\u5411-restful-server-\u53d6-xml-\u8cc7\u6599",level:2}];function p(e){const n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u53c3\u8003:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/remoting.html",children:"Remoting and web services using Spring"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"http://gturnquist-quoters.cfapps.io/api/random",children:"http://gturnquist-quoters.cfapps.io/api/random"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u7248\u672c Spring 4.x"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"./Spring_Wicket_Restful",children:"Spring Wicket Restful API \u6574\u4f75\u7df4\u7fd2"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"./Spring_Restful",children:"Spring Restful API \u7df4\u7fd2"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"pom.xml"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:"\r\n    \x3c!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-annotations --\x3e\r\n    <dependency>\r\n        <groupId>com.fasterxml.jackson.core</groupId>\r\n        <artifactId>jackson-annotations</artifactId>\r\n        <version>2.8.6</version>\r\n    </dependency>\r\n    \x3c!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core --\x3e\r\n    <dependency>\r\n        <groupId>com.fasterxml.jackson.core</groupId>\r\n        <artifactId>jackson-core</artifactId>\r\n        <version>2.8.6</version>\r\n    </dependency>\r\n    \x3c!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --\x3e\r\n    <dependency>\r\n        <groupId>com.fasterxml.jackson.core</groupId>\r\n        <artifactId>jackson-databind</artifactId>\r\n        <version>2.8.6</version>\r\n    </dependency>\r\n     \r\n    \x3c!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.dataformat/jackson-dataformat-xml --\x3e\r\n    <dependency>\r\n        <groupId>com.fasterxml.jackson.dataformat</groupId>\r\n        <artifactId>jackson-dataformat-xml</artifactId>\r\n        <version>2.8.6</version>\r\n    </dependency>\r\n\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u5411-restful-server-\u53d6-string-\u8cc7\u6599",children:"\u5411 RESTful server \u53d6 String \u8cc7\u6599"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u53d6\u5f97 JASON String \u4e26\u81ea\u884c\u4f7f\u7528 ObjectMapper \u8f49\u63db\u6210\u6307\u5b9a\u578b\u5225"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"\r\n        //\u5411 RESTful server \u53d6\u8cc7\u6599\u7bc4\u4f8b\r\n        import org.springframework.web.client.RestTemplate;\r\n        ------------------------------------------------------------\r\n        RestTemplate restTemplate = new RestTemplate();\r\n        String uri = \"http://opendata.cwb.gov.tw/opendataapi?dataid=F-A0012-001&authorizationkey=CWB-936FC500-F62C-487C-95C9-BB17DD188132\";\r\n        String result = restTemplate.getForObject(uri, String.class);\r\n         \r\n        System.out.println(\"2----------------------\"+result);\r\n \r\n  \r\n        // \u81ea\u884c parse JSON \u6210 JsonResp.class \u7bc4\u4f8b\r\n        import com.fasterxml.jackson.databind.ObjectMapper;\r\n        ------------------------------------------------------------       \r\n        String test =\"{'type':'success','value':{'id':3,'quote':'Spring has come quite a ways in addressing developer enjoyment and ease of use since the last time I built an application using it.'}}\";\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        try {\r\n            JsonResp read = mapper.readValue(test, JsonResp.class);\r\n            System.out.println(read.getType()); // Enum\r\n            System.out.println(read.getValue().getId()); //Long\r\n            System.out.println(read.getValue().getQuote()); //String\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(\"unexpected\", e);\r\n        }\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u5411-restful-server-\u53d6-pojo-\u8cc7\u6599",children:"\u5411 RESTful server \u53d6 POJO \u8cc7\u6599"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u76f4\u63a5\u5c07 server \u7aef\u8cc7\u6599\u8f49\u6210\u6307\u5b9a Entity","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u53ef\u4ee5\u662f composite \u7d50\u69cb"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u6307\u5b9a POJO \u578b\u5225: Quote and Value class"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"@JsonIgnoreProperties(ignoreUnknown = true) : \u5ffd\u7565 JSON \u4e2d\u6709\u51fa\u73fe\uff0c\u4f46 Entity \u4e2d\u4e0d\u6253\u7b97 mapping \u7684\u8cc7\u6599"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Quote.java"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"    package insect.totem.restful;\r\n    import com.fasterxml.jackson.annotation.JsonIgnoreProperties;\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public class Quote {\r\n        private String type;\r\n        private Value value; // composite\r\n        public Quote() {\r\n        }\r\n\r\n        @Override\r\n        public String toString() {\r\n            return \"Quote{\" +\r\n                    \"type='\" + type + '\\'' +\r\n                    \", value=\" + value +\r\n                    '}';\r\n        }\r\n        \r\n        getters/setters...\r\n    }\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Value.java"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"    package insect.totem.restful;\r\n    import com.fasterxml.jackson.annotation.JsonIgnoreProperties;\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public class Value {\r\n        private Long id;\r\n        private String quote;\r\n        public Value() {}\r\n        public Long getId() {\r\n            return this.id;\r\n        }\r\n        public String getQuote() {\r\n            return this.quote;\r\n        }\r\n        public void setId(Long id) {\r\n            this.id = id;\r\n        }\r\n        public void setQuote(String quote) {\r\n            this.quote = quote;\r\n        }\r\n        @Override\r\n        public String toString() {\r\n            return \"Value{\" + \"id=\" + id + \", quote='\" + quote + '\\'' + '}';\r\n        }\r\n    }\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Restful Service"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u642d\u914d restTemplate.getForObject() method"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'    //\u5411 RESTful server \u53d6\u8cc7\u6599\u7bc4\u4f8b\r\n    import org.springframework.web.client.RestTemplate;\r\n    ------------------------------------------------------------\r\n    //Test JSON\r\n            RestTemplate restTemplate = new RestTemplate();\r\n            String uri = "http://gturnquist-quoters.cfapps.io/api/random";\r\n            Quote  result = restTemplate.getForObject(uri, Quote .class);\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u5411-restful-server-\u53d6\u96c6\u5408\u8cc7\u6599",children:"\u5411 RESTful server \u53d6\u96c6\u5408\u8cc7\u6599"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u642d\u914d restTemplate.getForEntity() method"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'            // \u82e5restful server\u56de\u50b3\u7684\u662fcollection\u8cc7\u6599\r\n            RestTemplate restTemplate = new RestTemplate();\r\n            String uri = "http://localhost:8080/insect/totem/collection";\r\n            ResponseEntity<JsonResp[]> responseEntity = restTemplate.getForEntity(uri, JsonResp[].class);\r\n            JsonResp[] data = responseEntity.getBody();\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u5411-restful-server-\u53d6-xml-\u8cc7\u6599",children:"\u5411 RESTful server \u53d6 xml \u8cc7\u6599"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5411\u6c23\u8c61\u5c40\u53d6 xml \u8cc7\u6599"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u76ee\u6a19\u7d50\u679c\u683c\u5f0f: cwbopendata.java"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"POJO \u5167\u7684 attribute \u8207 XML \u4e2d\u7684 element \u9808\u540c\u540d"}),"\n",(0,s.jsx)(n.li,{children:'\u6216\u662f\u4ee5 @JacksonXmlProperty(localName = "identifier") \u6307\u5b9a, element \u540d\u7a31'}),"\n",(0,s.jsx)(n.li,{children:"@JsonIgnoreProperties(ignoreUnknown = true) : \u5ffd\u7565 XML \u4e2d\u6709\u51fa\u73fe\u7684 elements \uff0c\u4f46 Entity \u4e2d\u4e0d\u6253\u7b97 mapping \u7684\u8cc7\u6599"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'    package insect.totem.restful;\r\n    import com.fasterxml.jackson.annotation.JsonIgnoreProperties;\r\n    import com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\r\n    import com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlRootElement;\r\n    @JacksonXmlRootElement\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public class cwbopendata {\r\n        @JacksonXmlProperty(localName = "identifier")\r\n        private String identifier__;\r\n\r\n        @JacksonXmlProperty(localName = "sender")\r\n        private String sender;\r\n\r\n        @JacksonXmlProperty(localName = "sent")\r\n        private String sent;\r\n\r\n        @JacksonXmlProperty(localName = "status")\r\n        private String status;\r\n       \r\n       getters/setters...\r\n    }\r\n\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"RestService: XmlMapper"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5148\u53d6\u5f97 String \u518d\u642d\u914d\u4f7f\u7528 XmlMapper"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'    RestTemplate restTemplate = new RestTemplate();\r\n     \r\n    String text = restTemplate.getForObject(\r\n            "http://opendata.cwb.gov.tw/opendataapi?dataid=F-A0012-001&authorizationkey=CWB-936FC500-F62C-487C-95C9-BB17DD188132",\r\n            String.class);\r\n    XmlMapper mapper = new XmlMapper();\r\n    try {\r\n        cwbopendata value =\r\n                mapper.readValue(text, cwbopendata.class);\r\n         \r\n        System.out.println("-------------------------------------------");\r\n        System.out.println(text);\r\n        System.out.println("-------------------------------------------");\r\n         \r\n        System.out.println(value.getIdentifier__());\r\n        System.out.println(value.getSender());\r\n        System.out.println(value.getSent());\r\n        System.out.println(value.getStatus());\r\n    } catch (IOException e) {\r\n        throw new RuntimeException("unexpected", e);\r\n    }\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"RestService: POJO"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u76f4\u63a5\u5c07 xml \u8f49 Entity"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'    RestTemplate restTemplate = new RestTemplate();\r\n     \r\n    cwbopendata value = restTemplate.getForObject(\r\n            "http://opendata.cwb.gov.tw/opendataapi?dataid=F-A0012-001&authorizationkey=CWB-936FC500-F62C-487C-95C9-BB17DD188132",\r\n            cwbopendata.class);\r\n        System.out.println(value.getIdentifier__());\r\n        System.out.println(value.getSender());\r\n        System.out.println(value.getSent());\r\n        System.out.println(value.getStatus());\n'})})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}}}]);