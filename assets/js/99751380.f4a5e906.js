"use strict";(self.webpackChunkinsect_totem=self.webpackChunkinsect_totem||[]).push([[4065],{1819:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"PostgreSQL/JSONB/PostgreSQL_Jsonb_misc","title":"PostgreSQL Jsonb \u96dc\u9805\u7d00\u9304","description":"Jsonb \u76f8\u95dc\u96dc\u4e03\u96dc\u516b\u90fd\u8a18\u9019","source":"@site/docs/140_PostgreSQL/JSONB/000_PostgreSQL_Jsonb_misc.md","sourceDirName":"140_PostgreSQL/JSONB","slug":"/PostgreSQL/JSONB/PostgreSQL_Jsonb_misc","permalink":"/docs/PostgreSQL/JSONB/PostgreSQL_Jsonb_misc","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":0,"frontMatter":{"title":"PostgreSQL Jsonb \u96dc\u9805\u7d00\u9304","description":"Jsonb \u76f8\u95dc\u96dc\u4e03\u96dc\u516b\u90fd\u8a18\u9019","keywords":["postgresql","Jsonb"]},"sidebar":"totem_sidebar","previous":{"title":"JSONB","permalink":"/docs/PostgreSQL/JSONB/"},"next":{"title":"\u65b0\u589e\u4fee\u6539 JSONB \u6b04\u4f4d\u503c","permalink":"/docs/PostgreSQL/JSONB/PostgreSQL_Update_JSONB_Column"}}');var t=s(74848),l=s(28453);const i={title:"PostgreSQL Jsonb \u96dc\u9805\u7d00\u9304",description:"Jsonb \u76f8\u95dc\u96dc\u4e03\u96dc\u516b\u90fd\u8a18\u9019",keywords:["postgresql","Jsonb"]},c=void 0,d={},o=[{value:"Jsonb CRUD \u6703\u9019\u5e7e\u500b\u57fa\u672c\u5c31\u5920\u4e86 <span>\xa0</span>",id:"jsonb-crud-\u6703\u9019\u5e7e\u500b\u57fa\u672c\u5c31\u5920\u4e86-",level:2},{value:"<span><em><strong>Jsonb column \u5fc5\u5b78\u5167\u5bb9\u64cd\u4f5c</strong></em></span>",id:"jsonb-column-\u5fc5\u5b78\u5167\u5bb9\u64cd\u4f5c",level:3},{value:"PostgreSQL Json/Jsonb \u5dee\u7570",id:"postgresql-jsonjsonb-\u5dee\u7570",level:2},{value:"PostgreSQL Jsonb \u96dc\u9805\u7d00\u9304 <span>\xa0</span>",id:"postgresql-jsonb-\u96dc\u9805\u7d00\u9304-",level:2},{value:"\u95dc\u65bc append \u65b0\u503c",id:"\u95dc\u65bc-append-\u65b0\u503c",level:2},{value:"\u81ea\u52d5\u7e2e\u6392 Jsonb \u67e5\u8a62\u7d50\u679c <code><strong>jsonb_pretty</strong></code>",id:"\u81ea\u52d5\u7e2e\u6392-jsonb-\u67e5\u8a62\u7d50\u679c-jsonb_pretty",level:2},{value:"\u53d6\u4ee3\u65e2\u6709\u8cc7\u6599 insert/update: <code><strong>jsonb_set</strong></code> <span>\xa0</span>",id:"\u53d6\u4ee3\u65e2\u6709\u8cc7\u6599-insertupdate-jsonb_set-",level:2},{value:"\u5217\u51fa\u6240\u6709\u9802\u5c64\u9375: <code><strong>jsonb_object_keys()</strong></code>",id:"\u5217\u51fa\u6240\u6709\u9802\u5c64\u9375-jsonb_object_keys",level:2},{value:"PostgreSQL Jsonb \u76f8\u95dc operators <span>\xa0</span>",id:"postgresql-jsonb-\u76f8\u95dc-operators-",level:2}];function j(e){const n={a:"a",blockquote:"blockquote",br:"br",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.h2,{id:"jsonb-crud-\u6703\u9019\u5e7e\u500b\u57fa\u672c\u5c31\u5920\u4e86-",children:["Jsonb CRUD \u6703\u9019\u5e7e\u500b\u57fa\u672c\u5c31\u5920\u4e86 ",(0,t.jsx)("span",{id:"Jsonb_fundamental",children:"\xa0"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u5beb\u5728\u6700\u524d\u9762: \u57fa\u672c\u4e0a\u6bcf\u500b\u64cd\u4f5c\u90fd\u6709\u4e00\u500b ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"operator"})})," \u8207\u4e00\u500b\u76f8\u5c0d\u61c9\u7684 ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"\u5167\u5efa\u51fd\u6578"})})," \u53ef\u4f7f\u7528\uff0c\u4f46\u6703\u4e0b\u9762\u9019\u5169\u500b\u5df2\u7d93\u53ef\u4ee5\u5927\u6bba\u56db\u65b9\u4e86\u3002"]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsxs)(n.a,{href:"./Postgresql_find_value_by_Attr_of_JSONB_column",children:[(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"->"})})," + ",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"->>"})})," operator: \u67e5\u8a62\u5167\u5bb9"]})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"jsonb_set()"})})," \u51fd\u6578: ",(0,t.jsx)(n.a,{href:"./PostgreSQL_Update_JSONB_Column",children:"\u65b0\u589e"}),"\u3001",(0,t.jsx)(n.a,{href:"./PostgreSQL_Update_JSONB_Column",children:"\u4fee\u6539"}),"\u3001\u8207 ",(0,t.jsx)(n.a,{href:"./PostgreSQL_Delete_attr",children:"\u522a\u9664"})," \u842c\u7528\uff0c\u4e14\u591a\u7248\u672c\u652f\u63f4"]}),"\n",(0,t.jsx)(n.li,{children:"\u5176\u4ed6\u7684\u5c31\u5148\u7576\u4f5c\u662f PostgreSQL \u63d0\u4f9b\u7684\u8a9e\u6cd5\u7cd6\u3002"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"jsonb-column-\u5fc5\u5b78\u5167\u5bb9\u64cd\u4f5c",children:(0,t.jsx)("span",{style:{color:"#FF1100"},children:(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"Jsonb column \u5fc5\u5b78\u5167\u5bb9\u64cd\u4f5c"})})})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"CRUD"}),(0,t.jsx)(n.th,{style:{textAlign:"center"},children:"\u64cd\u4f5c"}),(0,t.jsx)(n.th,{children:"\u7bc4\u4f8b"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"insert"})}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"jsonb_set()"})})}),(0,t.jsxs)(n.td,{children:["update table SET jasonb_col = ",(0,t.jsx)("br",{}),"jsonb_set( jasonb_col, Array['path_element'], '{  \"k1\": \"v1\"'}'::jsonb );"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"update"})}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"jsonb_set()"})})}),(0,t.jsx)(n.td,{children:"\u540c\u4e0a\u7bc4\u4f8b"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"delete"})}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"jsonb_set()"})})}),(0,t.jsxs)(n.td,{children:["\u540c\u4e0a\u7bc4\u4f8b\u4f46 value \u6539\u70ba null, ",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"'null'::jsonb"})})," ",(0,t.jsx)("br",{}),"update table SET jasonb_col = ",(0,t.jsx)("br",{}),"jsonb_set( jasonb_col, Array['path_element'], 'null'::jsonb );"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"select"})}),(0,t.jsxs)(n.td,{style:{textAlign:"center"},children:[(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"->"})}),", ",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"->>"})})]}),(0,t.jsx)(n.td,{children:"select jasonb_col -> 'attribute' ->> 'attribute' from table"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"postgresql-jsonjsonb-\u5dee\u7570",children:"PostgreSQL Json/Jsonb \u5dee\u7570"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["PostgreSQL \u5167\u5efa JSON/JSONB \u578b\u614b\u7684 Columns\u3002",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"JSON"})})," :",(0,t.jsx)(n.br,{}),"\n","\u4ee5\u6587\u5b57\u5132\u5b58\u7684 JSON \u683c\u5f0f\u8cc7\u6599\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"JSONB"})})," :",(0,t.jsx)(n.br,{}),"\n","PostgreSQL \u4e2d\u7684\u4e00\u7a2e\u7279\u6b8a\u6b04\u4f4d\uff0c\u5132\u5b58\u7684\u662f JSON \u578b\u614b\u4f46\u662f Compiled \u904e\u7684 binary \u8cc7\u6599\u3002",(0,t.jsx)(n.br,{}),"\n","\u7279\u6027\u662f\uff0c\u53ef\u4ee5\u8b93 PostgreSQL \u7d93\u7531 mata data ",(0,t.jsx)(n.strong,{children:"\u52a0\u901f\u67e5\u8a62"})," \u7684\u901f\u5ea6\u3002",(0,t.jsx)(n.br,{}),"\n","\u4f46\u53cd\u904e\u4f86\u8aaa\uff0c\u5728 ",(0,t.jsx)(n.strong,{children:"\u5132\u5b58\u6642\u8f03\u82b1\u6642\u9593"})," \uff0c\u56e0\u70ba\u8981\u5148\u8f49 mata data \u6240\u4ee5\u76f8\u5c0d\u4e0a\u6703\u6bd4\u8f03\u8017\u6642\u3002",(0,t.jsx)(n.br,{}),"\n","\u56e0\u6b64\u4e3b\u8981\u7528\u5728\uff0c\u5c11\u7de8\u8f2f\u4f46\u537b\u9700\u8981\u7d93\u5e38\u67e5\u8a62\u7684\u8acb\u5883\u4e0b\u3002"]}),"\n"]}),"\n",(0,t.jsxs)(n.h2,{id:"postgresql-jsonb-\u96dc\u9805\u7d00\u9304-",children:["PostgreSQL Jsonb \u96dc\u9805\u7d00\u9304 ",(0,t.jsx)("span",{id:"jsonb_scenario",children:"\xa0"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u7bc4\u4f8b\u60c5\u5883"}),"\n"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"\u5047\u8a2d\u6709\u4e00\u500b\u7d00\u9304\u6a19\u672c\u8cc7\u8a0a table \uff0c\u5176\u4e2d\u4ee5 json_data \u7528\u4f86\u8a18\u9304\u5206\u985e\u6a39\u8cc7\u6599 (\u754c\u9580\u7db1\u76ee\u79d1\u5c6c\u7a2e)\u3002"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:'    --table: insect_specimen\r\n    create table insect_specimen (\r\n      id serial primary key, \r\n      sample_id text, \r\n      collect_date timestamp without time zone, \r\n      commom_name character varying(100),\r\n      classification jsonb -- \u6e2c\u8a66\u7528\u7684 jsonb column  \r\n    );\r\n    \r\n    INSERT INTO public.insect_specimen(\r\n                id, sample_id, collect_date, commom_name, classification)\r\n        VALUES (nextVal(\'insect_specimen_id_seq\'), \'A0000000001\', \'2025-11-20\', \'\u87d1\u8782\',\r\n                \'{"Kingdom" : "Animalia", "Phylum" : "Arthropoda", "Class" : "Insecta","Superorder" : "Dictyoptera","Order" : "Blattodea"}\');\r\n                \r\n    \r\n    INSERT INTO public.insect_specimen(\r\n                id, sample_id, collect_date, commom_name, classification)\r\n        VALUES (nextVal(\'insect_specimen_id_seq\'), \'A0000000002\', \'2025-11-22\', \'\u767d\u7dda\u6591\u868a\',\r\n                \'{"Kingdom" : "Animalia","Phylum" : "Arthropoda","Class" : "Insecta","Order" : "Diptera","Family" : "Culicidae" }\');  \r\n    -- "Genus" : "Aedes"\r\n    -- "Subgenus": "Stegomyia"\r\n    -- "Species\' : "albopictus"\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\u95dc\u65bc-append-\u65b0\u503c",children:"\u95dc\u65bc append \u65b0\u503c"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["JSONB column \u8981\u5148\u6709 ",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"\u7a7a JSON \u7269\u4ef6"})}),",\u5982 '{ \xa0}'  \u624d\u80fd set \u503c","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u82e5\u5546\u696d\u908f\u8f2f\u4e0a jsonb \u6b04\u4f4d\u975e\u521d\u59cb\u4fbf\u6709\u8cc7\u6599\u5247\u53ef\u5148\u7d66\u4e88\u7a7a\u503c ",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"'{ \xa0}'"})})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"    INSERT INTO public.insect_specimen(\r\n                id, sample_id, collect_date, commom_name, \r\n                classification)\r\n        VALUES (nextVal('insect_specimen_id_seq'), 'A0000000001', '2025-11-20', '\u87d1\u8782',\r\n                '{}');\n"})}),"\n",(0,t.jsxs)(n.h2,{id:"\u81ea\u52d5\u7e2e\u6392-jsonb-\u67e5\u8a62\u7d50\u679c-jsonb_pretty",children:["\u81ea\u52d5\u7e2e\u6392 Jsonb \u67e5\u8a62\u7d50\u679c ",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"jsonb_pretty"})})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u4ee5 ",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"jsonb_pretty(jsonb)"})})," \u9032\u884c\u81ea\u52d5\u7e2e\u6392\uff0c\u65b9\u4fbf ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"\u4eba\u5de5\u95b1\u8b80"})})]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:'    select jsonb_pretty(insect.classification) classification from insect_specimen insect where id = 1;\r\n    \r\n    ==== \u67e5\u8a62\u7d50\u679c\u662f\u7121\u5e8f\u7684\r\n    "{\r\n        "Class": "Insecta",\r\n        "Order": "Blattodea",\r\n        "Phylum": "Arthropoda",\r\n        "Kingdom": "Animalia",\r\n        "Superorder": "Dictyoptera"\r\n    }"    \n'})}),"\n",(0,t.jsxs)(n.h2,{id:"\u53d6\u4ee3\u65e2\u6709\u8cc7\u6599-insertupdate-jsonb_set-",children:["\u53d6\u4ee3\u65e2\u6709\u8cc7\u6599 insert/update: ",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"jsonb_set"})})," ",(0,t.jsx)("span",{id:"jsonb_set",children:"\xa0"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["PostgreSQL 10+ \u53ef\u4f7f\u7528 ",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"jsonb_insert"})})," : \u63d2\u5165\u65b0\u503c\uff0c\u4e0d\u8986\u84cb\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:["\u7f6e\u5165\u4e26\u53d6\u4ee3\u7269\u4ef6, Replacement(\u53d6\u4ee3\u65e2\u6709\u8cc7\u6599)","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["arguments","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"1st: jsob \u6b04\u4f4d"}),"\n",(0,t.jsxs)(n.li,{children:["2nd: Array Path \u8def\u5f91, ",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"Array['hierarchy', 'nested']"})}),"\u3002 ",(0,t.jsxs)("span",{style:{color:"#0044FF"},children:[" ",(0,t.jsx)(n.strong,{children:"\u627e\u5f97\u5230\u8def\u5f91\u624d\u6703 update"})," "]})]}),"\n",(0,t.jsxs)(n.li,{children:["3rd: Jsonb Content \u65b0\u5167\u5bb9\uff0c",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"\u9700\u8f49\u6210 jsonb"})})," \u683c\u5f0f\u3002quote \u7528\u4f86\u544a\u77e5\u662f String, ",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"::jsonb"})})," \u7528\u4f86\u544a\u77e5\u8f49\u6210 jsonb \u683c\u5f0f"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Syntax: jsonb_set"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"    jsonb_set(\r\n          target JSONB, path TEXT[], new_value JSONB[, create_if_missing BOOLEAN]\r\n        ) -> JSONB\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u6ce8\u610f\u4e8b\u9805:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Array Path :","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u8a9e\u6cd5: ",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"Array['hierarchy', 'nested']"})})]}),"\n",(0,t.jsx)(n.li,{children:"\u82e5 Path \u67e5\u7121\u6a19\u7684 element\uff0c\u5247\u4e0d\u52d5\u4f5c\u3002\u4f46\u6703\u6709\u6210\u529f\u56de\u61c9\u3002"}),"\n",(0,t.jsx)(n.li,{children:"element \u4e0b\u5168\u90e8\u7d50\u69cb\uff0c\u90fd\u6703\u88ab\u65b0\u503c (\u65b0 Jsonb Content \u53d6\u4ee3)"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Jsonb Content :","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u683c\u5f0f\u9808\u70ba Jsonb format\uff0c\u5167\u5bb9\u5f8c\u65b9\u9700\u52a0 ",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"::jsonb"})})," \u5ba3\u544a\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:["Jsonb ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"String format"})}),' content \u8868\u793a\u6cd5: "new_value"::jsonb']}),"\n",(0,t.jsxs)(n.li,{children:["Jsonb ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"Object format"})}),' content \u8868\u793a\u6cd5: " \'{  "key1": "value1", "key2": { "key2-2": "value2-2" } }\'::jsonb']}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u7bc4\u4f8b"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:'    -- \u6307\u5b9a\u8def\u5f91\u5167\u5bb9\u6539\u70ba\u7c21\u55ae\u5b57\u4e32 : String\r\n    update insect_specimen \r\n        SET classification = jsonb_set( classification, Array[\'Genus\'], \'"Aedes"\'::jsonb ) where id = 2; \r\n\r\n    -- \u6307\u5b9a\u8def\u5f91\u5167\u5bb9\u6539\u70ba nested ccontent: Json object\r\n    update insect_specimen SET classification = jsonb_set( \r\n        classification, \r\n        Array[\'Genus\'], \r\n        \'{  "name":"Aedes", \r\n            "Subgenus": { "name": "Stegomyia" }\r\n         }\'::jsonb \r\n        \r\n        ) where id = 2; \r\n        \r\n    -- \u6307\u5b9a nested \u8def\u5f91: Array[\'parent\', \'child\', \'descendent\'] \r\n    update insect_specimen \r\n        SET classification = \r\n            jsonb_set( \r\n              classification, \r\n              Array[\'Genus\', \'Subgenus\', \'name\'], \r\n              \'{ "value": "Stegomyia"}\'::jsonb ) \r\n        where id = 2;  \r\n        \r\n    ====\r\n    "{\r\n        "Class": "Insecta",\r\n        "Genus": {\r\n            "name": "Aedes",\r\n            "Subgenus": {\r\n                "name": "Stegomyia"\r\n            }\r\n        },\r\n        "Order": "Diptera",\r\n        "Family": "Culicidae",\r\n        "Phylum": "Arthropoda",\r\n        "Kingdom": "Animalia",\r\n        "Species": "albopictus"\r\n    }"        \r\n        \n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u8b8a\u9ad4: \u8def\u5f91\u76f4\u63a5\u7528 object \u4ee3\u66ff"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Array Path \u4ee5\u7269\u4ef6\u8f49\u63db"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"syntax"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- \u4e0b\u5217\u5169\u7a2e \u8def\u5f91\u5beb\u6cd5\u610f\u601d\u76f8\u540c\r\n    Array['parent', 'child', 'descendent'] \r\n    \r\n    '{parent, child, descendent}'\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"example"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"   -- \u55ae\u4e00\u968e\u5c64\r\n    update insect_specimen \r\n        SET classification = jsonb_set( classification, \r\n        '{Genus}', -- \u7b49\u540c\u65bc Array['Genus']\r\n        '\"Aedes-2\"'::jsonb ) where id = 2; \r\n\r\n   -- \u4e09\u968e\u968e\u5c64\r\n    update insect_specimen \r\n         SET classification = jsonb_set( classification, \r\n         '{Genus, Subgenus, name}', -- \u7b49\u540c\u65bc Array['Genus', 'Subgenus', 'name']\r\n         '{ \"value\": \"Stegomyia-2\" }'::jsonb ) where id = 2;  \n"})}),"\n",(0,t.jsxs)(n.h2,{id:"\u5217\u51fa\u6240\u6709\u9802\u5c64\u9375-jsonb_object_keys",children:["\u5217\u51fa\u6240\u6709\u9802\u5c64\u9375: ",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"jsonb_object_keys()"})})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u4f7f\u7528 ",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"jsonb_object_keys()"})})," \u9032\u884c\u67e5\u8a62"]}),"\n",(0,t.jsx)(n.li,{children:"\u52a0\u4e0a DISTINCT \u53bb\u91cd\u8907"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"    --\u5217\u51fa\u6240\u6709\u9802\u5c64\u9375\uff0c\u55ae\u4e00 row\r\n    select jsonb_object_keys(classification) as keys\r\n        from insect_specimen where id = 1;\r\n\r\n    --\u5217\u51fa Table \u4e0b Jsonb \u6240\u6709\u9802\u5c64\u9375: \u4f9d Row \u67e5\u8a62\uff0c\u4e0d\u81ea\u52d5\u53bb\u91cd\u8907\r\n    select DISTINCT jsonb_object_keys(classification) as keys\r\n        from insect_specimen;\n"})}),"\n",(0,t.jsxs)(n.h2,{id:"postgresql-jsonb-\u76f8\u95dc-operators-",children:["PostgreSQL Jsonb \u76f8\u95dc operators ",(0,t.jsx)("span",{id:"syntax_sugar",children:"\xa0"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://www.postgresql.org/docs/9.5/functions-json.html",children:"\u5b98\u65b9\u53c3\u8003"})}),"\n"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"center"},children:"Operator"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"\u529f\u7528"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Path Style/R Operand Type"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"center"},children:(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"->"})})}),(0,t.jsxs)(n.td,{style:{textAlign:"left"},children:["Jsonb \u69fd\u4e32 ",(0,t.jsxs)("span",{style:{color:"#0044FF"},children:[" ",(0,t.jsx)(n.strong,{children:"\u8def\u5f91\u9023\u63a5\u7b26\u865f"})," "]})]}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u7df4\u7e8c\u7b26\u865f\u4e32\u63a5 Style Path"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"center"},children:(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"->>"})})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"Jsonb \u89e3\u6790\u6210 String"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u7df4\u7e8c\u7b26\u865f\u4e32\u63a5 Style Path"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"center"},children:(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"#>"})})}),(0,t.jsxs)(n.td,{style:{textAlign:"left"},children:["Jsonb \u69fd\u4e32 ",(0,t.jsxs)("span",{style:{color:"#0044FF"},children:[" ",(0,t.jsx)(n.strong,{children:"\u8def\u5f91\u9023\u63a5\u7b26\u865f"})," "]})]}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"Json Object Style path"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"center"},children:(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"#>>"})})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"Jsonb \u89e3\u6790\u6210 String"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"Json Object Style path"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"center"},children:(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"-"})})}),(0,t.jsxs)(n.td,{style:{textAlign:"left"},children:["\u6307\u5b9a\u9802\u5c64\u7d50\u69cb\u9032\u884c\u522a\u9664",(0,t.jsx)("br",{}),"\u4e0d\u53ef\u4e32\u63a5"]}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"String"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"center"},children:(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"#-"})})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u6307\u5b9a\u8def\u5f91\u9032\u884c\u522a\u9664"}),(0,t.jsxs)(n.td,{style:{textAlign:"left"},children:["Json Object Style path",(0,t.jsx)("br",{})," Text[]"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"center"},children:(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"?"})})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u6307\u5b9a\u5b57\u4e32\u662f\u5426\u5b58\u5728\u65bc\u9802\u5c64\u9375(top-level key)"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"text"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"?|"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"Text Array \u4e2d\u6e05\u55ae\u662f\u5426\u81f3\u5c11\u4e00\u500b\u5b58\u5728\u65bc\u9802\u5c64\u9375"}),(0,t.jsxs)(n.td,{style:{textAlign:"left"},children:["Json Object Style path",(0,t.jsx)("br",{})," Text[]"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"center"},children:(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"?&"})})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"Text Array \u4e2d\u6240\u6709\u6e05\u55ae\u662f\u5426\u90fd\u5b58\u5728\u65bc\u9802\u5c64\u9375"}),(0,t.jsxs)(n.td,{style:{textAlign:"left"},children:["Json Object Style path",(0,t.jsx)("br",{})," Text[]"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"||"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u4e32\u63a5 jsonb \u5728\u4e00\u8d77"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u56de\u50b3 jsonb"})]})]})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u8a3b: sharp operators \u6216 jsonb_set() function \u5728\u4f7f\u7528 ",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"Json Object Style path"})})," \u6642\uff0c\u4e0b\u5217\u5169\u7a2e\u98a8\u683c\u7686\u53ef\u63a1\u7528"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'    -- \u6a19\u6e96\u5beb\u6cd5: \u4f9d\u64da key \u7684\u578b\u5225\u505a\u76f8\u61c9\u5b57\u9762\u91cf\u4fee\u98fe\r\n    \'{"Genus", "Subgenus", "name", "value"}\'\r\n    \'{"profile", "phones", 0}\'\r\n \r\n    --\u7c21\u5316\u7248: \u7701\u7565 key \u578b\u5225\u4fee\u98fe \r\n    \'{Genus, Subgenus, name, value}\'\r\n    \'{profile, phones, 0}\'\r\n    \n'})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(j,{...e})}):j(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>c});var r=s(96540);const t={},l=r.createContext(t);function i(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);