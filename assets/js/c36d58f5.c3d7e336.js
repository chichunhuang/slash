"use strict";(self.webpackChunktotem=self.webpackChunktotem||[]).push([[9065],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>g});var a=t(67294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=a.createContext({}),c=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=c(e.components);return a.createElement(s.Provider,{value:n},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=c(t),d=i,g=m["".concat(s,".").concat(d)]||m[d]||u[d]||r;return t?a.createElement(g,o(o({ref:n},p),{},{components:t})):a.createElement(g,o({ref:n},p))}));function g(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var r=t.length,o=new Array(r);o[0]=d;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[m]="string"==typeof e?e:i,o[1]=l;for(var c=2;c<r;c++)o[c]=t[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},70663:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var a=t(87462),i=(t(67294),t(3905));const r={title:"Python ConfigParser \u89e3\u6790 ini \u6a94",description:"Python ini ConfigParser",keywords:["Python","Parsers"]},o="Python Parsers",l={unversionedId:"DevTech/Python/Misc/Python_3_Parser_ConfigParser",id:"DevTech/Python/Misc/Python_3_Parser_ConfigParser",title:"Python ConfigParser \u89e3\u6790 ini \u6a94",description:"Python ini ConfigParser",source:"@site/docs/DevTech/Python/05_Misc/Python_3_Parser_ConfigParser.md",sourceDirName:"DevTech/Python/05_Misc",slug:"/DevTech/Python/Misc/Python_3_Parser_ConfigParser",permalink:"/docs/DevTech/Python/Misc/Python_3_Parser_ConfigParser",draft:!1,tags:[],version:"current",frontMatter:{title:"Python ConfigParser \u89e3\u6790 ini \u6a94",description:"Python ini ConfigParser",keywords:["Python","Parsers"]},sidebar:"totem_sidebar",previous:{title:"Python \u6a94\u6848\u8207\u8cc7\u6599\u593e\u8d70\u8a2a",permalink:"/docs/DevTech/Python/Misc/Python_3_File_and_Dir"},next:{title:"Python \u65e5\u671f\u8207\u6642\u9593",permalink:"/docs/DevTech/Python/Misc/Python_3_Time"}},s={},c=[{value:"ini \u6a94\u7684\u7bc4\u4f8b",id:"ini-\u6a94\u7684\u7bc4\u4f8b",level:2},{value:"\u5e38\u7528\u51fd\u6578",id:"\u5e38\u7528\u51fd\u6578",level:2},{value:"ini \u6a94\u6848\u8b80\u53d6\u65b9\u5f0f",id:"ini-\u6a94\u6848\u8b80\u53d6\u65b9\u5f0f",level:2},{value:'ini \u6a94\u6848\u5c6c\u6027\u8b80\u53d6\u65b9\u5f0f\u8207\u8f49\u578b <span id="casting">\xa0</span>',id:"ini-\u6a94\u6848\u5c6c\u6027\u8b80\u53d6\u65b9\u5f0f\u8207\u8f49\u578b-",level:2},{value:"ini \u6a94\u6848\u5c6c\u6027\u9810\u8a2d\u503c",id:"ini-\u6a94\u6848\u5c6c\u6027\u9810\u8a2d\u503c",level:2},{value:"\u5c6c\u6027\u5167\u63d2(Interpolation) : BasicInterpolation",id:"\u5c6c\u6027\u5167\u63d2interpolation--basicinterpolation",level:2},{value:"\u5c6c\u6027\u5167\u63d2(Interpolation) : ExtendedInterpolation",id:"\u5c6c\u6027\u5167\u63d2interpolation--extendedinterpolation",level:2},{value:"ini \u683c\u5f0f\u5167\u5bb9\u5176\u4ed6\u8b80\u53d6\u65b9\u5f0f",id:"ini-\u683c\u5f0f\u5167\u5bb9\u5176\u4ed6\u8b80\u53d6\u65b9\u5f0f",level:2},{value:'\u4ee5\u8ff4\u5708\u8b80\u53d6 ini \u5167\u5bb9: config.items() <span id="config_items">\xa0</span>',id:"\u4ee5\u8ff4\u5708\u8b80\u53d6-ini-\u5167\u5bb9-configitems-",level:2},{value:'\u4ee5\u8ff4\u5708\u8b80\u53d6 ini \u5167\u5bb9: config.sections() <span id="config_sections">\xa0</span>',id:"\u4ee5\u8ff4\u5708\u8b80\u53d6-ini-\u5167\u5bb9-configsections-",level:2},{value:'\u8cc7\u6599\u5efa\u7acb\u8207\u4fee\u6539 <span id="add_section_set">\xa0</span>',id:"\u8cc7\u6599\u5efa\u7acb\u8207\u4fee\u6539-",level:2},{value:"\u5efa\u7acb ini \u683c\u5f0f\u6a94",id:"\u5efa\u7acb-ini-\u683c\u5f0f\u6a94",level:2}],p={toc:c},m="wrapper";function u(e){let{components:n,...t}=e;return(0,i.kt)(m,(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"python-parsers"},"Python Parsers"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"\u9019\u908a\u6458\u8981\u7d00\u9304 Python \u4e2d\u76f8\u95dc\u7684 Parser \u5de5\u5177")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"api"),(0,i.kt)("th",{parentName:"tr",align:null},"Doc Type"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Configparser"),(0,i.kt)("td",{parentName:"tr",align:null},"*.ini")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"ElementTree"),(0,i.kt)("td",{parentName:"tr",align:null},"*.xml")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"pandas"),(0,i.kt)("td",{parentName:"tr",align:null},"*.csv")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"openpyxl"),(0,i.kt)("td",{parentName:"tr",align:null},"*.xls")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"argparse"),(0,i.kt)("td",{parentName:"tr",align:null},"command line")))),(0,i.kt)("h1",{id:"configparser-ini-\u6a94\u6848\u89e3\u6790"},"ConfigParser ini \u6a94\u6848\u89e3\u6790"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"ini \u6a94\u985e\u4f3c\u4e00\u822c\u7684 property \u6a94\uff0c\u4f46\u662f\u6709\u518d\u5206\u4e0d\u540c sections \u5340\u584a\u3002",(0,i.kt)("br",{parentName:"p"}),"\n","\u5927\u591a\u662f\u4f7f\u7528\u5728 Windows \u4f5c\u696d\u7cfb\u7d71\u4e0b\u3002",(0,i.kt)("br",{parentName:"p"}),"\n","\u6c92\u6709\u56b4\u683c\u7684\u6a94\u6848\u898f\u7bc4\uff0c\u4e5f\u6c92\u6709\u5c08\u7528\u7684\u526f\u6a94\u540d\u3002",(0,i.kt)("br",{parentName:"p"}),"\n","\u662f\u4e00\u7a2e\u6709\u9ede\u81ea\u7531\u7684\u8a2d\u5b9a\u6a94\u3002  ")),(0,i.kt)("p",null,"ini \u57fa\u672c\u91cd\u9ede\u6458\u8981\u5982\u4e0b: "),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u9700 Unicode \u7de8\u78bc"),(0,i.kt)("li",{parentName:"ul"},"\u8a3b\u89e3\u7528 # \u6216 ; \u8d77\u59cb\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u5141\u8a31\u4f7f\u7528\u4f54\u4f4d\u7b26\u6216\u662f\u8cc7\u6599\u5167\u63d2\u3002\u5167\u63d2\u8a9e\u6cd5\u70ba %(attribute)\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u812b\u9038\u5b57\u5143\u70ba %  "),(0,i.kt)("li",{parentName:"ul"},"\u5167\u5bb9\u53ef\u4ee5\u4ee5\u7b49\u6578\u7684\u7a7a\u767d\u9032\u884c\u7e2e\u6392")),(0,i.kt)("h2",{id:"ini-\u6a94\u7684\u7bc4\u4f8b"},"ini \u6a94\u7684\u7bc4\u4f8b"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"1.DEFAULT \u5340\u584a\u4e2d\u7684\u5c6c\u6027\u53ef\u4f5c\u70ba\u5c6c\u6027\u7684\u9810\u8a2d\u503c\u3002\u4f46\u524d\u63d0\u662f:",(0,i.kt)("br",{parentName:"p"}),"\n","","\xa0","\u7576\u7a0b\u5f0f\u6b32\u53d6\u51fa\u67d0\u4e00 section \u4e0b\u4e0d\u5b58\u5728\u7684 key \u7684\u5c6c\u6027\u503c\u6642\uff0c",(0,i.kt)("br",{parentName:"p"}),"\n","","\xa0","\u800c DEFAULT section \u6709\u8a2d\u5b9a\u7684\u8a71\uff0c\u5247\u53ef\u4f9d DEFAULT \u503c\u4ee3\u7528\u3002 "),(0,i.kt)("p",{parentName:"blockquote"},"2.sections/attributions \u53ef\u4ee5\u7e2e\u6392\u65b9\u4fbf\u95b1\u8b80\u3002\u6587\u4ef6\u662f\u9019\u6a23\u8aaa\uff0c\u5be6\u969b\u4e0a\u4f3c\u4e4e\u61c9\u8a72\u907f\u514d\u3002   "),(0,i.kt)("blockquote",{parentName:"blockquote"},(0,i.kt)("p",{parentName:"blockquote"},"Indentation \u662f\u6709\u689d\u4ef6\u7684\uff0c\u4e0d\u5c0f\u5fc3\u5c31\u6703\u51fa\u932f\uff0c\u4e0d\u5efa\u8b70\u4f7f\u7528\u3002",(0,i.kt)("br",{parentName:"p"}),"\n","Section Indentation \u4f3c\u4e4e\u53ea\u80fd\u5728\u66f9\u4e32\u7684 sections \u4e2d\u4f7f\u7528\uff0c\u610f\u5373\u9802\u5c64 section \u4e0d\u53ef\u4ee5 indent\u3002",(0,i.kt)("br",{parentName:"p"}),"\n","\u8207 nested section \u540c\u968e\u5c64\u7684\u5176\u4ed6 attributions \u4e5f\u5fc5\u9808 indent\u3002  ")),(0,i.kt)("p",{parentName:"blockquote"},"3.multiline values \u76f4\u63a5\u65b7\u884c\u689d\u5217\u5373\u53ef\u3002   "),(0,i.kt)("p",{parentName:"blockquote"},"4.\u7a7a\u503c\u6642\u5c6c\u6027\u5f8c\u4ecd\u9808\u52a0\u4e0a\u5192\u865f\u6216\u7b49\u865f\uff0c\u4e0d\u7136\u6703\u62cb\u51fa ParsingError\u3002  ")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"ini \u6a94\u7684\u7bc4\u4f8b")," ",(0,i.kt)("br",null),"\n\u7bc4\u4f8b\u4f86\u6e90: ",(0,i.kt)("a",{parentName:"p",href:"https://docs.python.org/3/library/configparser.html"},"configparser \u2014 Configuration file parser")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ini"},"[DEFAULT]\nPI = 3.1415926535\nEuler = 2.7182818284\nSpeed_of_light= 299792458\nAvogadro = 6.022140 *10^23\n\n[Simple Values]\nkey=value\nspaces in keys=allowed\nspaces in values=allowed as well\nspaces around the delimiter = obviously\nyou can also use : to delimit keys from values\n\n[All Values Are Strings]\nvalues like this: 1000000\nor this: 3.14159265359\nare they treated as numbers? : no\nintegers, floats and booleans are held as: strings\ncan use the API to get converted values directly: true\n\n[Multiline Values]\nchorus: I'm a lumberjack, and I'm okay\n    I sleep all night and I work all day\n\n[No Values]\nkey_without_value : \nempty string value here =\n# : or = is required, otherwise configparser.ParsingError\n\n[You can use comments]\n# like this\n; or this\n\n# By default only in an empty line.\n# Inline comments can be harmful because they prevent users\n# from using the delimiting characters as parts of values.\n# That being said, this can be customized.\n\n    [Sections Can Be Indented]\n        can_values_be_as_well = True\n        does_that_mean_anything_special = False\n        purpose = formatting for readability\n        multiline_values = are\n            handled just fine as\n            long as they are indented\n            deeper than the first line\n            of a value\n        # Did I mention we can indent comments, too?\n")),(0,i.kt)("h2",{id:"\u5e38\u7528\u51fd\u6578"},"\u5e38\u7528\u51fd\u6578"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null}),(0,i.kt)("th",{parentName:"tr",align:null}))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"config.read_file(ini_file)"),(0,i.kt)("td",{parentName:"tr",align:null},"\u8b80\u53d6\u55ae\u4e00\u500b ini \u6a94")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"#config_read"},"config.read(","[","file_list","]",")")),(0,i.kt)("td",{parentName:"tr",align:null},"\u4e00\u6b21\u8b80\u53d6\u591a\u500b ini \u6a94")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"#config_readstr"},"config.read_string(content_of_ini_file)")),(0,i.kt)("td",{parentName:"tr",align:null},"\u8b80\u53d6 plain text \u5167\u5bb9\uff0c\u4e0d\u540c\u6b21\u8b80\u53d6\u7684\u8cc7\u6599\u6703\u6574\u5408\u5728\u4e00\u8d77\u3002")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"#config_readdict"},"config.read_dict(dict_json)")),(0,i.kt)("td",{parentName:"tr",align:null},"\u8b80\u53d6 dict \u7d50\u69cb\u5167\u5bb9\uff0c\u4e00\u6a23\u662f\u53ef\u4ee5\u5206\u6bb5\u8b80\u8cc7\u6599\uff0c\u7136\u5f8c\u6574\u5408\u5728\u4e00\u8d77\u3002")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"config.get(path, sub_path)"),(0,i.kt)("td",{parentName:"tr",align:null},"\u4f9d\u968e\u5c64\u8def\u5f91\u53d6\u5c6c\u6027\u503c\uff0c\u9810\u8a2d\u70ba str\u3002\u7121\u6cd5\u55ae\u7368\u6293\u51fa Section\u3002Legacy API.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"#casting"},"config.getboolean()")),(0,i.kt)("td",{parentName:"tr",align:null},"\u53d6\u503c\u4e26 cast \u70ba\u5e03\u6797")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"config.getint()"),(0,i.kt)("td",{parentName:"tr",align:null},"\u53d6\u503c\u4e26 cast \u70ba\u6578\u503c")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"#config_sections"},"config.sections()")),(0,i.kt)("td",{parentName:"tr",align:null},"\u5217\u51fa\u968e\u5c64\u5167\u7684 sections, string")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"#config_items"},"config.items()")),(0,i.kt)("td",{parentName:"tr",align:null},"\u53d6 config \u4e0b\u7684\u6240\u6709\u5143\u7d20, \u53ef\u89e3\u5305\u6210 key, value pairs")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"#config_items"},"config.items(sec_attr_name)")),(0,i.kt)("td",{parentName:"tr",align:null},"\u53d6\u6307\u5b9a\u968e\u5c64\u4e0b\u7684\u6240\u6709\u5143\u7d20, \u53ef\u89e3\u5305\u6210 key, value pair")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"config","[","'sec'","]","[","'attr'","]"),(0,i.kt)("td",{parentName:"tr",align:null},"\u4f9d\u968e\u5c64\u8def\u5f91\u53d6\u503c\u6216\u8a2d\u503c\uff0c\u9810\u8a2d\u70ba str\u3002\u53ef\u4ee5\u53ea\u63d0\u53d6 Section\u3002")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"#add_section_set"},"config.add_section(section_name)")),(0,i.kt)("td",{parentName:"tr",align:null},"\u589e\u52a0\u4e00\u500b Section\u3002Legacy API.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"#add_section_set"},"config.set(section_name, attribute_name, value)")),(0,i.kt)("td",{parentName:"tr",align:null},"Section \u4e0b\u589e\u52a0\u4e00\u500b attribute\u3002Legacy API.")))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u600e\u9ebc\u6703\u9019\u6a23\uff0c\u6211\u53cd\u5012\u662f\u6bd4\u8f03\u559c\u6b61 OO \u4e00\u4e9b\u7684 Legacy API\uff0c\u9084\u597d\u6709\u4fdd\u7559\u5411\u4e0b\u76f8\u5bb9\u3002")),(0,i.kt)("h2",{id:"ini-\u6a94\u6848\u8b80\u53d6\u65b9\u5f0f"},"ini \u6a94\u6848\u8b80\u53d6\u65b9\u5f0f"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"ini exercise")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-properties"},"[DEFAULT]\nPI = 3.1415926535\nEuler = 2.7182818284\nSpeed_of_light= 299792458\nAvogadro = 6.022140 *10^23\n\n[Mail]\nmail.disable=true\nmailTempalte.from=dummy+from@google.com\nmailTempalte.fromname=Insect Totem\n\n[DataSource]\njdbc.driverClassName=org.postgresql.Driver\njdbc.url.host=192.168.10.10\njdbc.url.port=5432\njdbc.url.schema=totem\njdbc.url=jdbc:postgresql://192.168.10.10:5432/totem\njdbc.username=totem\njdbc.password=password\njdbc.db.authority=  \n\n[Forbidden.account]\nbacklist=Ade\n   Ed\n   Edd\n\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"\u53d6\u503c\u76f8\u95dc Syntax")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u4ee5 configparser.ConfigParser() \u53d6\u5f97 Util"),(0,i.kt)("li",{parentName:"ul"},"config.sections() \u5217\u51fa\u6240\u6709 sections"),(0,i.kt)("li",{parentName:"ul"},"config","['section_name']",", \u4ee5 dict style \u8a9e\u6cd5\u53d6\u503c"),(0,i.kt)("li",{parentName:"ul"},"\u9810\u8a2d\u60c5\u5f62\u4e0b ConfigParser \u8b80\u53d6\u51fa\u7684\u5c6c\u6027\u503c\u7686\u70ba string\uff0c\u53ef\u4f9d\u9700\u8981\u81ea\u884c\u8f49\u63db\u578b\u5225\uff0c\u6216\u63a1\u7528\u53d6\u503c\u4e26\u8f49\u63db\u7684\u76f8\u95dc API\u3002  "),(0,i.kt)("li",{parentName:"ul"},"\u64cd\u4f5c\u6642: ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"section name \u662f case sensitive"),(0,i.kt)("li",{parentName:"ul"},"attribute name \u662f case insensitive"))),(0,i.kt)("li",{parentName:"ul"},"\u53ef\u7528 in \u8a9e\u6cd5\u6aa2\u67e5\u5c6c\u6027\u503c\u6216 section \u662f\u5426\u5b58\u5728\u3002\u6aa2\u67e5\u6642\u4ecd\u9808\u6ce8\u610f section name \u662f sensitive")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"import configparser, os\n\nwith open (r'D:\\tmp\\totem.ini', 'r') as ini_file:\n    config = configparser.ConfigParser()\n    config.read_file(ini_file)\n    \n    print(config.sections())\n    # ['Mail', 'DataSource', 'Forbidden.account']\n    print(config['Mail']) # <Section: Mail>\n    print(config['Mail']['MaIl.DiSaBlE']) # true  \n    print(type(config['Mail']['MaIl.DiSaBlE'])) # <class 'str'>    \n    print(type(config['DataSource']['jdbc.url.port'])) # <class 'str'>\n    \n    print('Mail' in config) # True\n    print('Mail.Disable' in config['Mail']) # True\n    \n")),(0,i.kt)("h2",{id:"ini-\u6a94\u6848\u5c6c\u6027\u8b80\u53d6\u65b9\u5f0f\u8207\u8f49\u578b-"},"ini \u6a94\u6848\u5c6c\u6027\u8b80\u53d6\u65b9\u5f0f\u8207\u8f49\u578b ",(0,i.kt)("span",{id:"casting"},"\xa0")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u4f7f\u7528 python built-in functions \u8f49\u578b"),(0,i.kt)("li",{parentName:"ul"},"\u4f7f\u7528 ConfigParser \u7684 getXX() \u8f49\u578b")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"\u95dc\u65bc config.getboolean() \u7684\u89e3\u6790: "),(0,i.kt)("blockquote",{parentName:"blockquote"},(0,i.kt)("p",{parentName:"blockquote"},"True: '1', 'yes', 'true', 'on' \u9810\u8a2d\u89e3\u6790\u70ba True\nFalse: '0', 'no', 'false', 'off' \u9810\u8a2d\u89e3\u6790\u70ba False"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"with open (r'D:\\tmp\\totem.ini', 'r') as ini_file:\n    config = configparser.ConfigParser()\n    config.read_file(ini_file)\n\n    datasource = config['DataSource']\n    print(datasource.getint('jdbc.url.port')) # 5432\n    print(type(datasource.getint('jdbc.url.port'))) # <class 'int>\n    print(int(datasource['jdbc.url.port'])) # built-in \n\n    mail = config['Mail']\n    print(mail.getboolean('mail.disable')) # True\n    print(type(mail.getboolean('mail.disable'))) # <class 'bool'>\n    \n    print(config.get('Mail', 'mail.disable')) # \u4f7f\u7528 get() \u53ef\u4ee5\u5beb\u8def\u5f91\n")),(0,i.kt)("h2",{id:"ini-\u6a94\u6848\u5c6c\u6027\u9810\u8a2d\u503c"},"ini \u6a94\u6848\u5c6c\u6027\u9810\u8a2d\u503c"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u5206\u70ba\u5169\u985e: DEFAULT \u8207 Fallback\uff0c\u90fd\u662f\u7528\u5728\u67e5\u7121\u5c6c\u6027\u8a2d\u5b9a\u6642\u3002"),(0,i.kt)("li",{parentName:"ul"},"DEFAULT: \u985e\u4f3c\u7cfb\u7d71 Global \u53c3\u6578\u6982\u5ff5\uff0c\u82e5 section \u4e2d\u67e5\u7121\u5c6c\u6027\u6642\u63a5\u4e0b\u4f86\u67e5\u8a62\u7684\u5927\u6c60\u5858\u3002"),(0,i.kt)("li",{parentName:"ul"},"Fallback: \u7576\u5411\u4e0a\u67e5\u8a62\u5c6c\u6027\u81f3 DEFAULT section \u4ecd\u67e5\u7121\u6642\uff0c\u6b64\u6642\u53ef\u4ee5\u7d66\u5b9a\u4e00\u500b\u7576\u67e5\u7121\u5c6c\u6027\u6642\u56de\u50b3\u7684 fallback value\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u8a3b: \u7a7a\u503c\u4ecd\u8996\u70ba\u6709\u8a72\u5c6c\u6027\uff0c\u6240\u4ee5\u4e0d\u9069\u7528\u65bc\u6b64\u8655\u7684\u9810\u8a2d\u503c\u3002")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"DEFAULT Section")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"1.DEFAULT \u5340\u584a\u4e2d\u7684\u5c6c\u6027\u53ef\u4f5c\u70ba\u5c6c\u6027\u7684\u9810\u8a2d\u503c\u3002\u4f46\u524d\u63d0\u662f:",(0,i.kt)("br",{parentName:"p"}),"\n","","\xa0","\u7576\u7a0b\u5f0f\u6b32\u53d6\u51fa\u67d0\u4e00 section \u4e0b\u4e0d\u5b58\u5728\u7684 key \u7684\u5c6c\u6027\u503c\u6642\uff0c",(0,i.kt)("br",{parentName:"p"}),"\n","","\xa0","\u800c DEFAULT section \u6709\u8a2d\u5b9a\u7684\u8a71\uff0c\u5247\u53ef\u4f9d DEFAULT \u503c\u4ee3\u7528\u3002 ")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"with open (r'D:\\tmp\\totem.ini', 'r') as ini_file:\n    config = configparser.ConfigParser()\n    config.read_file(ini_file)\n    \n    print(config['DEFAULT']['PI']) # 3.1415926535\n\n    print('PI' in config['DataSource']) # DEFAULT always in\n    print(config['Mail']['PI']) # 3.1415926535\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Fallback value")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"\u540c\u6a23\u662f\u7528\u5728\u67e5\u7121\u5c6c\u6027\u6642\uff0c\u82e5\u9023 DEFAULT section \u4e5f\u67e5\u7121\u7684\u8a71\uff0c\u53ef\u4ee5\u5728\u53d6\u503c\u6642\u5148\u7d66\u4e88\u9810\u8a2d\u3002",(0,i.kt)("br",{parentName:"p"}),"\n","fallback value \u5fc5\u9808\u4ee5 get() \u65b9\u5f0f\u53d6\u51fa\u6642\u624d\u53ef\u8a2d\u5b9a\u3002  ")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"with open (r'D:\\tmp\\totem.ini', 'r') as ini_file:\n    config = configparser.ConfigParser()\n    config.read_file(ini_file)\n    \n    dataSource = config['DataSource']\n    print( 'jdbc.db.authority' in dataSource)\n    print(config.get('DataSource', 'jdbc.db.authority' )) # \u6ce8\u610f\u662f\u6709\u503c, \u7a7a\u5b57\u4e32\n    print(dataSource.get('jdbc.db.authority', fallback='read only')) # \u6ce8\u610f\u662f\u6709\u503c, \u7a7a\u5b57\u4e32,\u6240\u4ee5\u6c92 fallback\n\n    print(dataSource.get('attribute_not_exists')) # None\n    print(dataSource.get('attribute_not_exists', fallback='fallback value')) # fallback value   \n    print(config.get('DataSource', 'attribute_not_exists', fallback='fallback value')) # fallback value               \n")),(0,i.kt)("h2",{id:"\u5c6c\u6027\u5167\u63d2interpolation--basicinterpolation"},"\u5c6c\u6027\u5167\u63d2","(","Interpolation",")"," : BasicInterpolation"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"\u5167\u63d2\u6307\u7684\u662f ini \u6a94\u4e2d\u5141\u8a31\u5c6c\u6027\u503c\u4e32\u63a5\u3002",(0,i.kt)("br",{parentName:"p"}),"\n","\u88ab\u5167\u5dee\u7684\u5c6c\u6027\u9808\u4ee5 ",(0,i.kt)("strong",{parentName:"p"},"%","(")," attr_name ",(0,i.kt)("strong",{parentName:"p"},")","s")," \u4fee\u98fe\u3002"),(0,i.kt)("blockquote",{parentName:"blockquote"},(0,i.kt)("p",{parentName:"blockquote"},"\u5c0f\u62ec\u865f ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("span",{style:{color:"#0044FF"}}," \u524d\u52a0\u4e00\u500b %, \u5f8c\u88dc\u4e00\u500b s ")),"\uff0c\u5225\u61f7\u7591\uff0c\u9664\u4e86%\u5916\uff0c ",(0,i.kt)("span",{style:{color:"#FF1100"}}," \u5f8c\u9762\u9084\u8981\u5e36\u4e00\u500b ",(0,i.kt)("strong",{parentName:"p"},"s")," "),"\u3002",(0,i.kt)("br",{parentName:"p"}),"\n","\u812b\u9038\u5b57\u5143\u70ba % \u767e\u5206\u6bd4\u7b26\u865f\u3002",(0,i.kt)("br",{parentName:"p"}),"\n","\u9810\u8a2d\u63a1\u7528\u7684 Interpolation \u70ba BasicInterpolation\uff0c\u4e0d\u9808\u984d\u5916\u6307\u5b9a\u6216\u8a2d\u5b9a\u5373\u53ef\u4f7f\u7528\u3002  "))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"ConfigParser \u7684 interpolation \u9810\u8a2d\u70ba BasicInterpolation()")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"ini")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"\n[Address]\ncountry: Nerverland\ncity: Indian Camp\nroad: central\nnumber: 1\naddress=No.%(number)s %(road)s rd., %(city)s, %(country)s\n\n[Escape.Char]\n# escape string: % \nscore: 80%%\n\n[Gender.Distribution]\nmale: 50.1%%\nfemale: 49.9%%\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"BasicInterpolation Example")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"with open (r'D:\\tmp\\totem.ini', 'r') as ini_file:\n    config = configparser.ConfigParser()\n    config.read_file(ini_file)\n    \n    print(config.get('Address', 'address'))\n    print(config['Address'][ 'address']) # No.1 central rd., Indian Camp, Nerverland\n\n    print(config.get('Gender.Distribution', 'male')) # 50.1%   \n")),(0,i.kt)("h2",{id:"\u5c6c\u6027\u5167\u63d2interpolation--extendedinterpolation"},"\u5c6c\u6027\u5167\u63d2","(","Interpolation",")"," : ExtendedInterpolation"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"\u6c92\u7279\u5225\u7814\u7a76 ExtendedInterpolation\uff0c\u4e0d\u904e\u731b\u4e00\u770b\u4f3c\u4e4e\u53ea\u662f\u5167\u63d2\u5c6c\u6027\u7684\u63d2\u5165\u4e0a\u4e0d\u540c\u3002\u6bd4\u8f03\u76f4\u89ba\uff0c\u985e\u4f3c\u4e00\u822c\u7a0b\u5f0f\u8a9e\u8a00\u7684\u7528\u6cd5\u3002\u63a8\u85a6!",(0,i.kt)("br",{parentName:"p"}),"\n","\u88ab\u5167\u5dee\u7684\u5c6c\u6027\u9808\u4ee5 ",(0,i.kt)("strong",{parentName:"p"},"${")," attr_name ",(0,i.kt)("strong",{parentName:"p"},"}")," \u4fee\u98fe\u3002"),(0,i.kt)("blockquote",{parentName:"blockquote"},(0,i.kt)("p",{parentName:"blockquote"},"\u4ee5\u9322\u7b26\u865f\u8207\u5927\u62ec\u865f __",(0,i.kt)("span",{style:{color:"#0044FF"}}," ${ attr_name } ")," \u4fee\u98fe\u5167\u63d2\u5c6c\u6027\u3002",(0,i.kt)("br",{parentName:"p"}),"\n","\u812b\u9038\u5b57\u5143\u70ba $ \u9322\u7b26\u865f\u3002  "))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"\n[Address2]\ncountry: Nerverland\ncity: Indian Camp\nroad: central\nnumber: 1\naddress=No.${number}, ${road} rd., ${city}, ${country}\n\n\nwith open (r'D:\\tmp\\totem2.ini', 'r') as ini_file:\n    config = configparser.ConfigParser(interpolation=configparser.ExtendedInterpolation())\n    config.read_file(ini_file)\n\n    ## ExtendedInterpolation\n    print(config.get('Address2', 'address'))\n    \n")),(0,i.kt)("h2",{id:"ini-\u683c\u5f0f\u5167\u5bb9\u5176\u4ed6\u8b80\u53d6\u65b9\u5f0f"},"ini \u683c\u5f0f\u5167\u5bb9\u5176\u4ed6\u8b80\u53d6\u65b9\u5f0f"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"config.read(","[list of filenames]",")")," ",(0,i.kt)("span",{id:"config_read"},"\xa0")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"config.read(","[list of filenames]","): \u5141\u8a31\u4e00\u6b21\u8b80\u591a\u500b ini \u6a94\u3002  "),(0,i.kt)("blockquote",{parentName:"blockquote"},(0,i.kt)("p",{parentName:"blockquote"},"\u4e0d\u540c\u6a94\u6848\u82e5\u51fa\u73fe\u76f8\u540c attribution \u5247\u4ee5\u5f8c\u8b80\u5230\u7684\u70ba\u6e96\u3002  "))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"config = configparser.ConfigParser()\nconfig.read([r'D:\\tmp\\totem.ini', r'D:\\tmp\\totem2.ini'])\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"config.read_string(content_of_ini_file)")," ",(0,i.kt)("span",{id:"config_readstr"},"\xa0")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"config.read_string(content_of_ini_file):  "),(0,i.kt)("blockquote",{parentName:"blockquote"},(0,i.kt)("p",{parentName:"blockquote"},"\u8b80\u53d6 plain text \u5167\u5bb9\uff0c\u4e0d\u540c\u6b21\u8b80\u53d6\u7684\u8cc7\u6599\u6703\u6574\u5408\u5728\u4e00\u8d77\u3002  "))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"config = configparser.ConfigParser()\n\nconfig.read_string('[Profile]\\n name=totem')\nprint(config['Profile']['name'])\n\nconfig.read_string('[Profile]\\n gender:male')\nfor att in config['Profile']:\n    print(att) # name, gender\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"config.read_dict(dict_json)")," ",(0,i.kt)("span",{id:"config_readdict"},"\xa0")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"config.read_dict(dict_json):  "),(0,i.kt)("blockquote",{parentName:"blockquote"},(0,i.kt)("p",{parentName:"blockquote"},"\u8b80\u53d6 dict \u7d50\u69cb\u5167\u5bb9\uff0c\u4e00\u6a23\u662f\u53ef\u4ee5\u5206\u6bb5\u8b80\u8cc7\u6599\uff0c\u7136\u5f8c\u6574\u5408\u5728\u4e00\u8d77\u3002  "))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"import configparser, os\nconfig = configparser.ConfigParser()\n\nconfig.read_dict({'Profile': {\"name\": 'totem',\n                              \"gender\": 'male'}\n                  })\n\nconfig.read_dict({'Education': {\"Master\": 'NTU',\n                              \"Bachelor\": 'NCHU'}\n                  })\n\nfor section in config:\n    print(section)\n    for attr in config[section]:\n        print(attr)\n        print(\"    %s=%s\" % (attr, config.get(section, attr)))\n        \n# DEFAULT\n# Profile\n# name\n#     name=totem\n# gender\n#     gender=male\n# Education\n# master\n#     master=NTU\n# bachelor\n#     bachelor=NCHU\n# \n# Process finished with exit code 0\n        \n")),(0,i.kt)("h2",{id:"\u4ee5\u8ff4\u5708\u8b80\u53d6-ini-\u5167\u5bb9-configitems-"},"\u4ee5\u8ff4\u5708\u8b80\u53d6 ini \u5167\u5bb9: config.items() ",(0,i.kt)("span",{id:"config_items"},"\xa0")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u7528\u4f86\u5217\u51fa sections \u6216 attributions"),(0,i.kt)("li",{parentName:"ul"},"config.items() : \u7576 config \u70ba root \u6642\uff0c\u53ef\u56de\u50b3\u6240\u6709 sections\uff0c <class 'collections.abc.ItemsView'>\u3002 \u53ef\u89e3\u5305\u6210 section_name, section_values\u3002 "),(0,i.kt)("li",{parentName:"ul"},"config.items() : \u7576 config \u70ba section \u6642\uff0c\u53ef\u56de\u50b3 section \u4e0b\u6240\u6709 attributions\uff0c <class 'collections.abc.ItemsView'>\u3002 \u53ef\u89e3\u5305\u6210 attr_name, attr_value\u3002 ")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"config.items()")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"with open (r'D:\\tmp\\totem.ini', 'r') as ini_file:\n    config = configparser.ConfigParser()\n    config.read_file(ini_file)\n    \n    sections = config.items() # \u672a\u6307\u660e\u6240\u4ee5\u5217\u5168\u90e8 sections\n    print(type(sections)) # <class 'collections.abc.ItemsView'>\n    for sec_name, sec_values in sections:\n        print(sec_name, sec_values) # <class 'str'>, <class 'configparser.SectionProxy'>\n        attrs = sec_values.items() # <class 'collections.abc.ItemsView'>\n        for attr_name, attr_value in attrs:\n            print(attr_name, attr_value)\n")),(0,i.kt)("h2",{id:"\u4ee5\u8ff4\u5708\u8b80\u53d6-ini-\u5167\u5bb9-configsections-"},"\u4ee5\u8ff4\u5708\u8b80\u53d6 ini \u5167\u5bb9: config.sections() ",(0,i.kt)("span",{id:"config_sections"},"\xa0")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u53ef\u56de\u50b3\u6240\u6709 sections\uff0c <class 'collections.abc.ItemsView'>\u3002 \u53ef\u89e3\u5305\u6210 section_name, section_values\u3002")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"config.sections()")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"with open (r'D:\\tmp\\totem.ini', 'r') as ini_file:\n    config = configparser.ConfigParser()\n    config.read_file(ini_file)\n    \n    for s in config.sections():\n        print(\"SECTION: \" , s)\n        attrs = config.items(s) # <class 'collections.abc.ItemsView'>,\u5217\u51fa\u6307\u5b9a section \u4e0b\u7684  attrs \u5305\u542b DEFAULT \u4e0b\u5167\u5bb9\n        # attrs = config[s].items(), \u6b64\u8655\u8207\u4e0a\u4e00\u884c\u7b49\u7fa9\n\n        for sec_name, sec_values in attrs:\n            print(sec_name, sec_values)    \n")),(0,i.kt)("h2",{id:"\u8cc7\u6599\u5efa\u7acb\u8207\u4fee\u6539-"},"\u8cc7\u6599\u5efa\u7acb\u8207\u4fee\u6539 ",(0,i.kt)("span",{id:"add_section_set"},"\xa0")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"config.add_section(name)"),(0,i.kt)("li",{parentName:"ul"},"config.set(section, attr, value)"),(0,i.kt)("li",{parentName:"ul"},"legacy API")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"import configparser\nconfig = configparser.ConfigParser()\n\n# current API\nconfig['Mail'] = {}\nmail = config['Mail']\nconfig['Mail']['mail.disable'] = 'True'\nmail['mailTempalte.from'] = 'dummy@org'\nmail['mailTempalte.fromname'] = 'dummy'\n\n# Legacy API\nconfig.add_section(\"Mail.Server\")\nconfig.set(\"Mail.Server\", \"IP\", '192.168.10.10')\nconfig.set(\"Mail.Server\", \"Port\", '1234')\n\nwith open(r'D:/tmp/export.ini', 'w') as configfile:\n    config.write(configfile)\n\n\n")),(0,i.kt)("h2",{id:"\u5efa\u7acb-ini-\u683c\u5f0f\u6a94"},"\u5efa\u7acb ini \u683c\u5f0f\u6a94"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"\u6982\u5ff5\u4e0a\u5f88\u7c21\u55ae\uff0c\u5c31\u50cf\u662f\u7de8\u8f2f\u4e00\u500b dict \u7136\u5f8c\u547c\u53eb write \u5beb\u6210\u6a94\u6848\u3002")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"\nimport configparser\n\nconfig = configparser.ConfigParser()\nconfig['DEFAULT'] = {'server': 'google.cloud',\n                     'port': '1234'}\n\n# \u5efa\u7acb Mail section, \u9019 statement \u4e0d\u80fd\u7701\u7565\u3002\nconfig['Mail'] = {}  \n\n# \u9019\u908a\u8981\u6ce8\u610f\uff0c\u56e0\u70ba python \u8a9e\u6cd5\u7684\u95dc\u4fc2\uff0c\u6c92\u6709\u5efa\u7acb\u4e26\u56de\u50b3\u8b8a\u6578\u7684\u8a9e\u6cd5\uff0c\u6240\u4ee5\u8981\u62c6\u5169\u884c\u3002\nmail = config['Mail'] \n\nconfig['Mail']['mail.disable'] = 'True'\nmail['mailTempalte.from'] = 'dummy@org'\nmail['mailTempalte.fromname'] = 'dummy'\n\nwith open(r'D:/tmp/export.ini', 'w') as configfile:\n    config.write(configfile)\n")))}u.isMDXComponent=!0}}]);