"use strict";(globalThis.webpackChunkinsect_totem=globalThis.webpackChunkinsect_totem||[]).push([[6221],{28453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>d});var s=r(96540);const l={},t=s.createContext(l);function i(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),s.createElement(t.Provider,{value:n},e.children)}},77376:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"SQL/Select_From_Result","title":"\u6d3e\u751f\u8868\u4f7f\u7528\u60c5\u5883 \u7531\u67e5\u8a62\u7d50\u679c\u518d\u6b21\u904e\u6ffe","description":"select from derived table","source":"@site/docs/150_SQL/Select_From_Result.md","sourceDirName":"150_SQL","slug":"/SQL/Select_From_Result","permalink":"/docs/SQL/Select_From_Result","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"\u6d3e\u751f\u8868\u4f7f\u7528\u60c5\u5883 \u7531\u67e5\u8a62\u7d50\u679c\u518d\u6b21\u904e\u6ffe","description":"select from derived table","keywords":["SQL","select from select"]},"sidebar":"totem_sidebar","previous":{"title":"TableA \u7684\u5167\u5bb9\u4fee\u6539 TableB","permalink":"/docs/SQL/SQL_update_from_another_table"},"next":{"title":"\u5728 sql from \u4e2d\u4f7f\u7528\u5b50\u67e5\u8a62","permalink":"/docs/SQL/Using_subqueries_outside_of_WHERE"}}');var l=r(74848),t=r(28453);const i={title:"\u6d3e\u751f\u8868\u4f7f\u7528\u60c5\u5883 \u7531\u67e5\u8a62\u7d50\u679c\u518d\u6b21\u904e\u6ffe",description:"select from derived table",keywords:["SQL","select from select"]},d=void 0,o={},c=[{value:"\u8a9e\u6cd5\u6982\u5ff5",id:"\u8a9e\u6cd5\u6982\u5ff5",level:2},{value:"\u91cd\u5851\u8cc7\u6599\u7d50\u69cb",id:"\u91cd\u5851\u8cc7\u6599\u7d50\u69cb",level:2},{value:"\u5167\u5d4c\u65bc JOIN \u6216 UNION \u7b49\u8907\u96dc\u7d50\u69cb\u4e2d",id:"\u5167\u5d4c\u65bc-join-\u6216-union-\u7b49\u8907\u96dc\u7d50\u69cb\u4e2d",level:2},{value:"\u9010\u6b65\u78ba\u8a8d\u8cc7\u6599\u72c0\u614b",id:"\u9010\u6b65\u78ba\u8a8d\u8cc7\u6599\u72c0\u614b",level:2},{value:"derived table \u5e38\u898b\u4f7f\u7528\u60c5\u5883",id:"derived-table-\u5e38\u898b\u4f7f\u7528\u60c5\u5883",level:2}];function a(e){const n={blockquote:"blockquote",br:"br",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:["\u5148\u8aaa\u660e\u4f7f\u7528 Derived table (\u6d3e\u751f\u8868) \u7684\u512a\u9ede\u8207\u597d\u8655",(0,l.jsx)(n.br,{}),"\n","\u9996\u5148:",(0,l.jsx)(n.br,{}),"\n","\xa0\xa0\xa0 Derived table \u8b93\u6211\u5011\u53ef\u4ee5\u5728\u55ae\u4e00\u67e5\u8a62\u4e2d ",(0,l.jsx)("span",{style:{color:"#0044FF"},children:(0,l.jsx)(n.strong,{children:"\u91cd\u5851\u8cc7\u6599\u7d50\u69cb"})}),(0,l.jsx)(n.br,{}),"\n","\xa0\xa0\xa0 \u63db\u53e5\u8a71\u8aaa\u53ef\u5efa\u7acb\u51fa\u4e00\u500b \u66ab\u6642 \u7684 table \u6216 view \u4f9b\u6b64\u6b21\u4f7f\u7528",(0,l.jsx)(n.br,{}),"\n","\xa0\xa0\xa0 \u8b93 ",(0,l.jsx)("span",{style:{color:"#0044FF"},children:(0,l.jsx)(n.strong,{children:"\u601d\u8003\u908f\u8f2f\u5206\u968e\u6bb5"})}),"\uff0c\u6bcf\u6b21\u8655\u7406\u4e00\u90e8\u5206\u52d5\u4f5c \u27a2 \u5148\u6574\u7406\u8cc7\u6599\u3001\u518d\u7be9\u9078\u3001\u904b\u7b97\u3002",(0,l.jsx)(n.br,{}),"\n","\u7b2c\u4e8c:\r\n\xa0\xa0\xa0 ",(0,l.jsx)("span",{style:{color:"#0044FF"},children:(0,l.jsx)(n.strong,{children:"\u8207 join \u6216 union \u7b49\u8907\u96dc\u7d50\u69cb\u642d\u914d\u4f7f\u7528"})}),(0,l.jsx)(n.br,{}),"\n","\xa0\xa0\xa0 \u6709\u6642\u5019\u6211\u5011\u60f3 join \u7684\u4e0d\u662f table\uff0c\u800c\u662f \u67d0\u500b\u8a08\u7b97\u7d50\u679c",(0,l.jsx)(n.br,{}),"\n","\xa0\xa0\xa0 \u6b64\u6642 derived table \u8b93\u6211\u5011\u7121\u9700\u984d\u5916\u5b9a\u7fa9 view \u6216\u9032\u884c\u591a\u6bb5\u67e5\u8a62"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u8a9e\u6cd5\u6982\u5ff5",children:"\u8a9e\u6cd5\u6982\u5ff5"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5728\u55ae\u4e00\u67e5\u8a62\u4e2d\u5efa\u7acb\u66ab\u5b58\u8868 temporary table\uff0c\u6216\u662f\u9032\u884c\u8cc7\u6599\u6574\u7406\u5f8c\u3002\u518d\u4f9b\u5f8c\u7e8c\u4f7f\u7528\u3002"}),"\n",(0,l.jsxs)(n.li,{children:["Derived table ",(0,l.jsx)("span",{style:{color:"#0044FF"},children:(0,l.jsx)(n.strong,{children:"alias"})})," \u4e0d\u53ef\u7701\u7565\uff0c\u4e0d\u7136\u53ef\u80fd\u6703\u51fa\u932f\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"    SELECT * \r\n        FROM (TEMPORARY_TABLE) AS derived;\r\n        \r\n    SELECT * FROM (\r\n        SELECT column1, column2\r\n            FROM some_table\r\n            WHERE condition\r\n    ) AS derived;\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u91cd\u5851\u8cc7\u6599\u7d50\u69cb",children:"\u91cd\u5851\u8cc7\u6599\u7d50\u69cb"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u7bc4\u4f8b: \u4e00(\u5b78\u751f)\u5c0d\u591a(\u8003\u8a66\u6210\u7e3e)\u7684\u60c5\u5f62\u4e0b\uff0c\u60f3\u53d6\u51fa\u591a\u65b9\u7684\u7fa4\u9ad4\u7279\u6027(\u5e73\u5747\u5206\u3001\u6700\u9ad8\u5206\u3001\u7e3d\u5206)\u6642\u3002","\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"\u4f8b\u5982: \u6b32\u53d6\u5f97\u6bcf\u4f4d\u540c\u5b78\u5e73\u5747\u8003\u8a66\u6210\u7e3e\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u5c07\u5b78\u751f\u59d3\u540d\u8207\u8003\u8a66\u95dc\u806f\u5728\u4e00\u8d77\uff0c"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"\r\n    -- \u908f\u8f2f\u62c6\u89e3: Derived \u5148\u9032\u884c\u8cc7\u6599\u91cd\u7d44\uff0c\u4e8b\u5f8c\u518d\u505a\u904e\u6ffe\r\n    SELECT derived.department\r\n        FROM (\r\n            SELECT department, COUNT(*) AS dept_count\r\n            FROM employees\r\n            GROUP BY department\r\n        ) AS derived\r\n    WHERE dept_count.dept_count > 5;\r\n\r\n    -- \u908f\u8f2f\u62c6\u89e3: Derived \u5148\u9032\u884c\u8cc7\u6599\u91cd\u7d44\uff0c\u4e8b\u5f8c\u518d\u505a\u904e\u6ffe\r\n    select s.FULLNAME, e.avg from (\r\n        select STUDENT_ID , avg(SCORE) from  EXAM \r\n           group by STUDENT_ID \r\n        ) e\r\n    left join STUDENT s on s.STUDENT_ID = e.STUDENT_ID \r\n        where e.avg < 60;\r\n    \r\n    -- \u6bd4\u8f03: \u672a\u5c07\u908f\u8f2f\u62c6\u89e3\uff0c\u540c\u6642\u601d\u8003\u5206\u7d44\u8207\u904e\u6ffe\u8a9e\u6cd5\r\n    select s.FULLNAME, avg(e.score) from \r\n        STUDENT s join EXAM p on s.STUDENT_ID = e.STUDENT_ID \r\n        group by c.FULLNAME \r\n        having avg(e.score) < 60;    \n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u5167\u5d4c\u65bc-join-\u6216-union-\u7b49\u8907\u96dc\u7d50\u69cb\u4e2d",children:"\u5167\u5d4c\u65bc JOIN \u6216 UNION \u7b49\u8907\u96dc\u7d50\u69cb\u4e2d"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"JOIN \u6216 UNION \u4e00\u500b\u6574\u7406\u904e\u7684\u8cc7\u6599\u96c6"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"    SELECT e.name, s.avg_salary\r\n        FROM employees e\r\n            JOIN (\r\n                SELECT department, AVG(salary) AS avg_salary\r\n                FROM employees\r\n                GROUP BY department\r\n           ) AS s\r\n        ON e.department = s.department;\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u9010\u6b65\u78ba\u8a8d\u8cc7\u6599\u72c0\u614b",children:"\u9010\u6b65\u78ba\u8a8d\u8cc7\u6599\u72c0\u614b"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u9010\u6b65\u589e\u52a0\u904e\u6ffe\u689d\u4ef6"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"SELECT d.height, d.weight, d.BMI\r\n  FROM (SELECT height, wieght, (weight / SQUARE(height)) AS BMI\r\n          FROM Students WHERE BMI > 23) d\r\nWHERE d.height > (SELECT AVG(d.height)\r\n                   FROM Students);\n"})}),"\n",(0,l.jsx)(n.h2,{id:"derived-table-\u5e38\u898b\u4f7f\u7528\u60c5\u5883",children:"derived table \u5e38\u898b\u4f7f\u7528\u60c5\u5883"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u591a\u8868\u683c\u5408\u4f75\u5f8c\u9032\u884c\u4e8c\u6b21\u7be9\u9078\u6216\u67e5\u8a62"}),"\n",(0,l.jsx)(n.li,{children:"\u5148\u5c07\u8907\u96dc\u8cc7\u6599\u5206\u7d44\u6574\u7406\u5f8c\u518d\u505a\u7d30\u7bc0\u7be9\u9078"}),"\n",(0,l.jsx)(n.li,{children:"\u4e00\u5c0d\u591a\u60c5\u5f62\u4e0b\uff0c\u642d\u914d\u805a\u5408\u51fd\u6578\u5c07\u8cc7\u6599\u5206\u7d44\u5f8c\uff0c\u518d\u5408\u4f75\u5448\u73fe\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u9010\u6b65\u78ba\u8a8d\u8cc7\u6599\u72c0\u614b\uff0c\u7531\u67e5\u8a62\u7d50\u679c\u518d\u6b21\u904e\u6ffe"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}}}]);