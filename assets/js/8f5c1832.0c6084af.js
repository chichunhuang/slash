"use strict";(self.webpackChunkinsect_totem=self.webpackChunkinsect_totem||[]).push([[5041],{3690:(e,s,l)=>{l.r(s),l.d(s,{assets:()=>c,contentTitle:()=>i,default:()=>a,frontMatter:()=>n,metadata:()=>t,toc:()=>p});const t=JSON.parse('{"id":"PostgreSQL/PostgreSQL_copy_from_CSV","title":"PostgreSQL \u81ea CSV \u6a94\u532f\u5165\u8cc7\u6599","description":"PostgreSQL copy from CSV","source":"@site/docs/140_PostgreSQL/PostgreSQL_copy_from_CSV.md","sourceDirName":"140_PostgreSQL","slug":"/PostgreSQL/PostgreSQL_copy_from_CSV","permalink":"/docs/PostgreSQL/PostgreSQL_copy_from_CSV","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"PostgreSQL \u81ea CSV \u6a94\u532f\u5165\u8cc7\u6599","description":"PostgreSQL copy from CSV","keywords":["postgresql","copy","CSV"]},"sidebar":"totem_sidebar","previous":{"title":"PostgreSQL \u8cc7\u6599\u532f\u51fa\u6210 CSV","permalink":"/docs/PostgreSQL/PostgreSQL_copy_CSV_to_table"},"next":{"title":"PostgresSQL psql \u96dc\u9805\u6307\u4ee4","permalink":"/docs/PostgreSQL/PostgreSQL_psql_misc"}}');var o=l(74848),r=l(28453);const n={title:"PostgreSQL \u81ea CSV \u6a94\u532f\u5165\u8cc7\u6599",description:"PostgreSQL copy from CSV",keywords:["postgresql","copy","CSV"]},i=void 0,c={},p=[{value:"\u81ea CSV \u6a94\u532f\u5165\u8cc7\u6599",id:"\u81ea-csv-\u6a94\u532f\u5165\u8cc7\u6599",level:2},{value:"import.sql \u5167\u5bb9\u7bc4\u4f8b",id:"importsql-\u5167\u5bb9\u7bc4\u4f8b",level:2},{value:"SQL Shell(psql) \u767b\u5165\u5f8c\u57f7\u884c\u65b9\u5f0f",id:"sql-shellpsql-\u767b\u5165\u5f8c\u57f7\u884c\u65b9\u5f0f",level:2},{value:"psql \u57f7\u884c\u65b9\u5f0f",id:"psql-\u57f7\u884c\u65b9\u5f0f",level:2}];function d(e){const s={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsx)(s.p,{children:"PostgreSQL 12+ \u53ef\u53c3\u8003\u4f7f\u7528 pg_read_file \u51fd\u6578"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"\u81ea-csv-\u6a94\u532f\u5165\u8cc7\u6599",children:"\u81ea CSV \u6a94\u532f\u5165\u8cc7\u6599"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"\u4ee5 SQL Shell / psql \u642d\u914d \\i -f \u6307\u4ee4\u57f7\u884c\u4e0b\u5217 *.sql \u7bc4\u4f8b"}),"\n",(0,o.jsx)(s.li,{children:"path_of_source_file.csv \u4e2d\u9808\u5177\u5099\u8207 totem_user \u4e2d\u540c\u540d\u6b04\u4f4d"}),"\n",(0,o.jsxs)(s.li,{children:["example \u8907\u88fd path_of_source_file.csv \u5167\u5bb9\u5230 totem_user \u8cc7\u6599\u8868","\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"step1: import.sql \u6307\u4ee4\u6a94\u6e96\u5099"}),"\n",(0,o.jsx)(s.li,{children:"step2: SQL Shell(psql) \u57f7\u884c import.sql \u5167\u5bb9\u65b9\u5f0f"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"importsql-\u5167\u5bb9\u7bc4\u4f8b",children:"import.sql \u5167\u5bb9\u7bc4\u4f8b"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"path_of_source_file.csv \u4e2d\u9808\u5177\u5099\u8207 totem_user \u4e2d\u540c\u540d\u6b04\u4f4d"}),"\n"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-sql",children:"\\encoding UTF8\r\n\\timing on\r\n\\copy totem_user(username, expired_date, email) FROM 'path_of_source_file.csv' DELIMITER ',' CSV HEADER ENCODING 'UTF8';\r\n\\timing off\n"})}),"\n",(0,o.jsx)(s.h2,{id:"sql-shellpsql-\u767b\u5165\u5f8c\u57f7\u884c\u65b9\u5f0f",children:"SQL Shell(psql) \u767b\u5165\u5f8c\u57f7\u884c\u65b9\u5f0f"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-shell",children:"totem=# \\i 'D:/tmp/import.sql'\n"})}),"\n",(0,o.jsx)(s.h2,{id:"psql-\u57f7\u884c\u65b9\u5f0f",children:"psql \u57f7\u884c\u65b9\u5f0f"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-sql",children:"psql -U postgres -d totem -p xxxx -h xxx.xxx.xxx.xxx -f import.sql\n"})}),"\n",(0,o.jsx)(s.h1,{id:"\u53c3\u8003",children:"\u53c3\u8003"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.a,{href:"./PostgreSQL_copy_CSV_to_table",children:"PostgreSQL \u8cc7\u6599\u532f\u51fa\u6210 CSV"})}),"\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.a,{href:"./SqlShell_psql_Basic",children:"PostgreSQL:\u76f4\u63a5\u65bc SQL Shell (psql) \u57f7\u884c sql \u6a94"})}),"\n"]})]})}function a(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453:(e,s,l)=>{l.d(s,{R:()=>n,x:()=>i});var t=l(96540);const o={},r=t.createContext(o);function n(e){const s=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:n(e.components),t.createElement(r.Provider,{value:s},e.children)}}}]);