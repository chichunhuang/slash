"use strict";(globalThis.webpackChunkinsect_totem=globalThis.webpackChunkinsect_totem||[]).push([[2631],{22298:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>i});const s=JSON.parse('{"id":"SQL/SQL_update_from_another_table","title":"TableA \u7684\u5167\u5bb9\u4fee\u6539 TableB","description":"SQL Update from One Table to Another","source":"@site/docs/150_SQL/SQL_update_from_another_table.md","sourceDirName":"150_SQL","slug":"/SQL/SQL_update_from_another_table","permalink":"/docs/SQL/SQL_update_from_another_table","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"TableA \u7684\u5167\u5bb9\u4fee\u6539 TableB","description":"SQL Update from One Table to Another","keywords":["SQL","update"]},"sidebar":"totem_sidebar","previous":{"title":"INSERT-INTO \u8207 SELECT-INTO \u4f7f\u7528\u4e0a\u5dee\u7570","permalink":"/docs/SQL/Insert_Into_vs_Select_Into"},"next":{"title":"\u6d3e\u751f\u8868\u4f7f\u7528\u60c5\u5883 \u7531\u67e5\u8a62\u7d50\u679c\u518d\u6b21\u904e\u6ffe","permalink":"/docs/SQL/Select_From_Result"}}');var l=r(74848),t=r(28453);const o={title:"TableA \u7684\u5167\u5bb9\u4fee\u6539 TableB",description:"SQL Update from One Table to Another",keywords:["SQL","update"]},c=void 0,a={},i=[{value:"\u60c5\u5883",id:"\u60c5\u5883",level:2},{value:"update \u6279\u6b21\u66f4\u65b0\u6307\u4ee4: \u6709\u65b0\u503c\u624d update",id:"update-\u6279\u6b21\u66f4\u65b0\u6307\u4ee4-\u6709\u65b0\u503c\u624d-update",level:2},{value:"<span><strong>\u5c0f\u5fc3\u76f8\u4f3c\u8a9e\u6cd5</strong></span>: \u7121\u65b0\u503c\u6e05\u7a7a <span></span>",id:"\u5c0f\u5fc3\u76f8\u4f3c\u8a9e\u6cd5-\u7121\u65b0\u503c\u6e05\u7a7a-",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",br:"br",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:["\u5c07 Table A \u7684\u6b04\u4f4d\u8cc7\u6599 Set \u5230Table B",(0,l.jsx)(n.br,{}),"\n","\u56e0\u70ba SQL \u7684 update \u8a9e\u6cd5\u662f\u4e0d\u5141\u8a31\u7528 Alias",(0,l.jsx)(n.br,{}),"\n","\u6240\u4ee5\u8a3b\u8a18\u6279\u6b21\u66f4\u6539\u6642\u7684\u91cd\u9ede"]}),"\n"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u91cd\u9ede\u6458\u8981:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u88ab\u6539\u7684 ",(0,l.jsxs)("span",{style:{color:"#0044FF"},children:[" ",(0,l.jsx)(n.strong,{children:"table \u4e0d\u53ef\u7528\u5225\u540d"})," "]})]}),"\n",(0,l.jsxs)(n.li,{children:["\u5169 table \u8cc7\u6599\u7b46\u6578\u4e0d\u540c\u6642\uff0c",(0,l.jsx)("span",{style:{color:"#FF1100"},children:(0,l.jsx)(n.strong,{children:"\u8981\u6ce8\u610f\u8cc7\u6599\u88ab\u6e05\u7a7a\u7684\u60c5\u5f62"})})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u60c5\u5883",children:"\u60c5\u5883"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u5047\u8a2d\u6211\u5011\u6709\u4ee5\u4e0b\u5169\u500b Tables\uff1a","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"TARGET_TABLE:"}),"\n",(0,l.jsx)(n.li,{children:"SOURCE_TABLE:"}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"\u5404\u6709\u4e00\u7b46\u8cc7\u6599\u7121\u6cd5 mapping"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"\r\n     -- target_table: \u6211\u5011\u8981\u66f4\u65b0\u7684\u8cc7\u6599\u8868\r\n     CREATE TABLE TARGET_TABLE (\r\n         id INT PRIMARY KEY,\r\n         value_to_update VARCHAR(255),\r\n         other_data VARCHAR(255)\r\n     );\r\n    \r\n     -- source_table: \u5305\u542b\u65b0\u8cc7\u6599\u7684\u8cc7\u6599\u8868\r\n     CREATE TABLE SOURCE_TABLE (\r\n         id INT PRIMARY KEY,\r\n         new_value VARCHAR(255),\r\n         some_other_info VARCHAR(255)\r\n     );\r\n    \r\n     -- \u7bc4\u4f8b\u8cc7\u6599\r\n     INSERT INTO TARGET_TABLE (id, value_to_update, other_data) VALUES\r\n         (1, 'Old Value 1', 'Target Data A'),\r\n         (2, 'Old Value 2', 'Target Data B'),\r\n         (3, 'Old Value 3', 'Target Data C'); -- Source \u7f3a\u6b64\u8cc7\u6599\r\n    \r\n     INSERT INTO SOURCE_TABLE (id, new_value, some_other_info) VALUES\r\n         (1, 'New Value for ID 1', 'Source Info X'),\r\n         (2, 'New Value for ID 2', 'Source Info Y'),\r\n         (4, 'New Value for ID 4', 'Source Info Z'); -- Target \u7121\u6b64\u8cc7\u6599\r\n\n"})}),"\n",(0,l.jsx)(n.h2,{id:"update-\u6279\u6b21\u66f4\u65b0\u6307\u4ee4-\u6709\u65b0\u503c\u624d-update",children:"update \u6279\u6b21\u66f4\u65b0\u6307\u4ee4: \u6709\u65b0\u503c\u624d update"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u6ce8\u610f\u4e8b\u9805:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u76ee\u7684: ",(0,l.jsx)("span",{style:{color:"#FF1100"},children:(0,l.jsx)(n.strong,{children:"\u53ea"})})," \u5c07 Source \u5217\u51fa\u7684\u5167\u5bb9\u66f4\u65b0\u5230 Target Table\u3002",(0,l.jsx)("code",{children:(0,l.jsx)(n.strong,{children:"Target \u67e5\u7121\u5c0d\u61c9\u65b0\u503c\u5247\u4e0d\u52d5\u4f5c"})}),"\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsxs)("span",{style:{color:"#0044FF"},children:[" ",(0,l.jsx)(n.strong,{children:"TARGET_TABLE \u88ab\u6539\u7684 table \u4e0d\u53ef\u7528\u5225\u540d"})," "]}),"\uff0c\u503c\u63a5\u4ee5 TableName \u7576 identifier"]}),"\n",(0,l.jsxs)(n.li,{children:["Source \u53d6\u503c\u7684\u7247\u6bb5\u4e0d\u53ef\u51fa\u73fe select \u5b57\u773c","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#update_to_null",children:(0,l.jsxs)("span",{style:{color:"#0044FF"},children:[" ",(0,l.jsx)(n.strong,{children:"set value \u7247\u6bb5\u4e0d\u53ef\u4ee5\u52a0 select \u95dc\u9375\u5b57"})," "]})})}),"\n",(0,l.jsx)(n.li,{children:"\u82e5\u52a0\u4e0a select \uff0c\u770b\u4f3c\u7d50\u679c\u6b63\u5e38\uff0c\u5be6\u5247\u7576 Source vs Target \u7b46\u6578\u4e0d\u540c\u6642\uff0c\u6703\u9020\u6210\u975e\u9810\u671f\u7684 Upldate (\u8cc7\u6599 update \u70ba  null)\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)("pre",{children:[(0,l.jsxs)(n.p,{children:["-- Target \u4e0d\u53ef\u4f7f\u7528 alias/ Source \u53ef\u7528\u53ef\u4e0d\u7528\r\n\xa0\xa0\xa0\xa0UPDATE ",(0,l.jsxs)("span",{style:{color:"#0044FF"},children:[" ",(0,l.jsx)(n.strong,{children:"TARGET_TABLE"})," "]}),"\r\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0SET value_to_update = ",(0,l.jsx)("span",{style:{color:"#FF1100"},children:(0,l.jsx)(n.strong,{children:"SOURCE_TABLE"})}),".new_value\r\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0FROM ",(0,l.jsx)("span",{style:{color:"#FF1100"},children:(0,l.jsx)(n.strong,{children:"SOURCE_TABLE"})}),"\r\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0WHERE ",(0,l.jsxs)("span",{style:{color:"#0044FF"},children:[" ",(0,l.jsx)(n.strong,{children:"TARGET_TABLE"})," "]}),".id = ",(0,l.jsx)("span",{style:{color:"#FF1100"},children:(0,l.jsx)(n.strong,{children:"SOURCE_TABLE"})}),".id;"]}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsxs)(n.p,{children:["-- Source \u53ef\u63a1\u7528 alias\r\n\xa0\xa0\xa0\xa0UPDATE ",(0,l.jsxs)("span",{style:{color:"#0044FF"},children:[" ",(0,l.jsx)(n.strong,{children:"TARGET_TABLE"})," "]}),"\r\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0SET value_to_update = ",(0,l.jsx)("span",{style:{color:"#FF1100"},children:(0,l.jsx)(n.strong,{children:"src"})}),".new_value\r\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0FROM SOURCE_TABLE ",(0,l.jsx)("span",{style:{color:"#FF1100"},children:(0,l.jsx)(n.strong,{children:"src"})}),"\r\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0WHERE ",(0,l.jsxs)("span",{style:{color:"#0044FF"},children:[" ",(0,l.jsx)(n.strong,{children:"TARGET_TABLE"})," "]}),".id = ",(0,l.jsx)("span",{style:{color:"#FF1100"},children:(0,l.jsx)(n.strong,{children:"src"})}),".id;"]}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)(n.p,{children:"-- \u9a57\u8b49\u66f4\u65b0\u7d50\u679c\r\n\xa0\xa0\xa0\xa0SELECT * FROM TARGET_TABLE;"})]}),"\n",(0,l.jsxs)(n.h2,{id:"\u5c0f\u5fc3\u76f8\u4f3c\u8a9e\u6cd5-\u7121\u65b0\u503c\u6e05\u7a7a-",children:[(0,l.jsx)("span",{style:{color:"#FF1100"},children:(0,l.jsx)(n.strong,{children:"\u5c0f\u5fc3\u76f8\u4f3c\u8a9e\u6cd5"})}),": \u7121\u65b0\u503c\u6e05\u7a7a ",(0,l.jsx)("span",{id:"update_to_null",children:"\xa0"})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u4e0b\u9762\u7684\u7bc4\u4f8b ",(0,l.jsx)("code",{children:(0,l.jsx)(n.strong,{children:"set value"})})," \u7247\u6bb5\u591a\u52a0 ",(0,l.jsx)("code",{children:(0,l.jsx)(n.strong,{children:"select"})})," \u95dc\u9375\u5b57\uff0c\u8207\u4e0a\u65b9\u7bc4\u4f8b\u4f5c\u7528\u5b8c\u5168\u4e0d\u540c\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:["\u6b64\u8a9e\u6cd5\u662f\uff0c",(0,l.jsx)(n.em,{children:(0,l.jsx)(n.strong,{children:"Target \u9010\u4e00\u67e5\u627e Source\uff0c\u82e5\u67e5\u7121 Source \u5247\u7576\u7f3a\u503c\u66f4\u65b0 Target"})}),"\u3002","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u7576 Source \u4e2d\u67e5\u7121 Target \u6240\u8981\u7684 mapping record \u5f8c\uff0c\u4ecd\u6703\u9032\u884c\u8cc7\u6599\u66f4\u65b0\u3002\u4e5f\u5c31\u662f\u6e05\u9664\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"-- \u4e0b\u9762\u7684 SQL --\x3e \u67e5\u7121\u8cc7\u6599\u5247\u4ee5 null \u66f4\u65b0\r\n-- UPDATE target_table \r\n--      SET value_to_update = \r\n--          (select s.new_value FROM source_table s WHERE target_table.id = s.id) ; -- \u67e5\u7121\u8cc7\u6599\u5247\u4ee5 null \u66f4\u65b0\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>c});var s=r(96540);const l={},t=s.createContext(l);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);