"use strict";(globalThis.webpackChunkinsect_totem=globalThis.webpackChunkinsect_totem||[]).push([[8615],{23214:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>i,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"PostgreSQL/JSONB/PosrgreSQL_JSON_Single_Double_Arrow","title":"-> \u8207 ->> \u67e5\u8a62\u5dee\u7570","description":"PosrgreSQL -> \u8207 ->> \u904b\u7b97\u5b50\u5dee\u7570","source":"@site/docs/140_PostgreSQL/JSONB/030_PosrgreSQL_JSON_Single_Double_Arrow.md","sourceDirName":"140_PostgreSQL/JSONB","slug":"/PostgreSQL/JSONB/PosrgreSQL_JSON_Single_Double_Arrow","permalink":"/docs/PostgreSQL/JSONB/PosrgreSQL_JSON_Single_Double_Arrow","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":30,"frontMatter":{"title":"-> \u8207 ->> \u67e5\u8a62\u5dee\u7570","description":"PosrgreSQL -> \u8207 ->> \u904b\u7b97\u5b50\u5dee\u7570","keywords":["JSONB","PostgreSQL"]},"sidebar":"totem_sidebar","previous":{"title":"\u67e5\u8a62 JSONB \u6b04\u4f4d\u503c","permalink":"/docs/PostgreSQL/JSONB/Postgresql_find_value_by_Attr_of_JSONB_column"},"next":{"title":"\u5408\u4f75 JSONB \u8cc7\u6599","permalink":"/docs/PostgreSQL/JSONB/PostgreSQL_Json_Concatenate"}}');var t=s(74848),l=s(28453);const o={title:"-> \u8207 ->> \u67e5\u8a62\u5dee\u7570",description:"PosrgreSQL -> \u8207 ->> \u904b\u7b97\u5b50\u5dee\u7570",keywords:["JSONB","PostgreSQL"]},c=void 0,i={},d=[{value:"\u5167\u5bb9\u67e5\u8a62\u8a9e\u6cd5: <code><strong>-&gt;&gt;</strong></code> Operator",id:"\u5167\u5bb9\u67e5\u8a62\u8a9e\u6cd5---operator",level:2},{value:"Jsonb \u7269\u4ef6\u67e5\u8a62\u8a9e\u6cd5: <code><strong>-&gt;</strong></code> Operator",id:"jsonb-\u7269\u4ef6\u67e5\u8a62\u8a9e\u6cd5---operator",level:2},{value:"\u7576\u67e5\u8a62\u7d50\u679c\u662f Array Element",id:"\u7576\u67e5\u8a62\u7d50\u679c\u662f-array-element",level:2},{value:"Json \u67e5\u8a62 Operators \u8b8a\u9ad4",id:"json-\u67e5\u8a62-operators-\u8b8a\u9ad4",level:2}];function a(e){const n={a:"a",blockquote:"blockquote",br:"br",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["PostgreSQL \u67e5\u8a62 field \u5167\u5bb9\u6642\u6709\u5169\u5927 operators\uff0c\u4e3b\u8981\u5dee\u5225\u5728\u65bc\u56de\u50b3\u7684\u8cc7\u6599\u578b\u5225",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"->>"})}),": \u56de\u50b3\u7684\u662f Json \u7684\u5b57\u9762\u91cf",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"->"})}),": \u56de\u50b3\u7684\u662f Jsonb \u7269\u4ef6"]}),"\n"]}),"\n",(0,t.jsxs)(n.h2,{id:"\u5167\u5bb9\u67e5\u8a62\u8a9e\u6cd5---operator",children:["\u5167\u5bb9\u67e5\u8a62\u8a9e\u6cd5: ",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"->>"})})," Operator"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"->>"})})," \u7528\u4f86\u67e5\u51fa JSON/JSONB \u7269\u4ef6 field \u5167\u5bb9\uff0c\u4e26\u4ee5 ",(0,t.jsx)(n.strong,{children:(0,t.jsx)("span",{style:{backgroundColor:"#b3c4ff"},children:"String \u683c\u5f0f"})})," \u56de\u50b3\u7d50\u679c\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:["\u6ce8\u610f PostgreSQL ",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"->>"})})," \u7684\u67e5\u8a62\u7d50\u679c\u986f\u793a\u6642 ",(0,t.jsx)(n.strong,{children:"\u6c92\u6709"})," \u7528 Double Quotes \u5305\u4f4f\u3002"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"  select address->>'country' as COUNTRY FROM profile;\r\n  \r\nCOUNTRY\r\n--------\r\nTAIWAN\r\nKOREA\r\nJAPAN\r\nCHINA\n"})}),"\n",(0,t.jsxs)(n.h2,{id:"jsonb-\u7269\u4ef6\u67e5\u8a62\u8a9e\u6cd5---operator",children:["Jsonb \u7269\u4ef6\u67e5\u8a62\u8a9e\u6cd5: ",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"->"})})," Operator"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"->"})})," \u7528\u4f86\u67e5\u51fa JSON/JSONB \u7269\u4ef6\u5167\u5bb9\uff0c\u4e26\u4ee5 ",(0,t.jsx)(n.strong,{children:(0,t.jsx)("span",{style:{backgroundColor:"#b3ffb3"},children:"JSON/JSONB \u7269\u4ef6\u683c\u5f0f"})})," \u56de\u50b3\u7d50\u679c\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"->"})})," JSON \u67e5\u8a62\uff0c\u6240\u5f97\u70ba postgreSQL JSON \u7269\u4ef6\uff0c\u6240\u4ee5\u53ef\u4ee5 ",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"->"})})," \u7e7c\u7e8c\u5f80\u5167\u69fd\u4e32\u67e5\u3002\u6700\u7d42\u518d\u4ee5 ",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"->>"})})," \u53d6\u503c\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:["\u6ce8\u610f PostgreSQL ",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"->"})})," \u7684\u67e5\u8a62\u7d50\u679c ",(0,t.jsx)(n.strong,{children:"\u6709"})," \u7528 Double Quotes (\u70ba JSON \u7269\u4ef6)\u5305\u4f4f\u3002"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:'"student": {\r\n\t"first_name": "insect",\r\n\t"last_name": "totem",\r\n\t"class": {\r\n\t\t"class_name" : "A",\r\n\t\t"grade" : {\r\n\t\t\t"grade_name" : "3",\r\n\t\t\t"school" :{\r\n\t\t\t\t"school_name" : "Entomology"\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["->> return ",(0,t.jsx)(n.strong,{children:"String"})]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"select Student_column->'student'->'class'->'grade'->'school'->> 'school_name' as SCHOOL from Profile;\r\n\r\nSCHOOL\r\ntext\r\n-------\r\nEntomology\r\n\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["-> return ",(0,t.jsx)(n.strong,{children:"jsonb"})," object"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"select Student_column->'student'->'class'->'grade'->'school'-> 'school_name' as SCHOOL from Profile;\r\n\r\n\r\nSCHOOL\r\njsonb\r\n-------\r\n\"Entomology\"\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["-> return ",(0,t.jsx)(n.strong,{children:"jsonb"})," object"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"select Student_column->'student'->'class'->'grade'->'school'  as SCHOOL from Profile;\r\n\r\n\r\nSCHOOL\r\njsonb\r\n-------\r\n\"{\"school_name\": \"Entomology\"}\"\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u7576\u67e5\u8a62\u7d50\u679c\u662f-array-element",children:"\u7576\u67e5\u8a62\u7d50\u679c\u662f Array Element"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u7576\u67e5\u8a62\u7d50\u679c\u662f Array Element \u6642\uff0cPostgreSQL \u53ef\u4ee5\u518d\u5411\u5167\u4ee5 index \u67e5\u627e\u6307\u5b9a\u4f4d\u7f6e\u5143\u7d20\u3002","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u8a3b: ",(0,t.jsx)("span",{style:{color:"#0044FF"},children:(0,t.jsx)(n.strong,{children:"zero-based index"})})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"->>"})}),"\u3001",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"->"})})," \u82e5\u6307\u5411\u7684\u7d50\u679c\u662f Array\uff0c\u5247\u5141\u8a31\u518d\u4e32\u4e00\u500b ",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"zero-based index"})}),"\uff0c\u4ee5\u53d6\u51fa\u55ae\u4e00\u5143\u7d20\u3002"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u4f8b\u5982: 'profile'->'phones'",(0,t.jsx)("span",{style:{color:"#0044FF"},children:" -> 0 "})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"\u7bc4\u4f8b\u60c5\u5883"})})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:'---Profile\r\n{\r\n    "profile": {\r\n                "first_name": "insect",\r\n                "last_name": "totem",\r\n                "phones": ["0922-222-222","0955-555-555"]\r\n            }\r\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"    SELECT last_name, raw_data -> 'profile'->'phones'->0  as phone_1 FROM Student\r\n      \r\n    LAST_NAMR               PHONE_1  \r\n    character varying       jsonb    \r\n    ----------------------------------------\r\n    totem                   \"0922-222-222\"  \n"})}),"\n",(0,t.jsx)(n.h2,{id:"json-\u67e5\u8a62-operators-\u8b8a\u9ad4",children:"Json \u67e5\u8a62 Operators \u8b8a\u9ad4"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u8207 jsonb_set() \u6539\u8cc7\u6599\u6307\u5b9a\u8def\u5f91\u6642\u985e\u4f3c\uff0cPostgreSQL Jsonb \u5167\u5efa\u5176\u4ed6\u8def\u5f91\u7c21\u6613\u5beb\u6cd5\u7684",(0,t.jsx)(n.a,{href:"./PostgreSQL_Jsonb_misc#syntax_sugar",children:"\u8a9e\u6cd5\u7cd6(Syntactic sugar)"}),"\u3002"]}),"\n",(0,t.jsx)(n.li,{children:"\u8a3b function \u53ef\u4ee5\u7d93\u7531 parse arg \u4f86\u5f97\u77e5 Path Style\uff0cOperators \u7528\u5728 SQL command \u4e2d\u9700\u4ee5\u5176\u4ed6\u65b9\u5f0f\u8fa8\u5225\u3002"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"\u67e5\u8a62\u76f8\u95dc operators \u6458\u8981"})})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u5728\u67e5\u8a62\u76f8\u95dc operators \u4e2d\uff0c","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"#"})})," \u4ee3\u8868\u5f8c\u65b9\u63a1\u7528 ",(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"Json Object Style path"})})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:">"})})," \u55ae\u500b\u4ee3\u8868 Jsonb \u7269\u4ef6\u5411\u4e0b\u518d\u63a2\u4e00\u5c64\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:">>"})})," \u5169\u500b\u4ee3\u8868\u5c07 Jsonb \u7269\u4ef6\u89e3\u6790\u6210 String\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"center"},children:"operator"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"path style(\u8a9e\u6cd5\u7cd6)"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"center"},children:(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"->"})})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u9023\u7e8c\u7b26\u865f\u4e32\u63a5 Style Path"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"center"},children:(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"->>"})})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u9023\u7e8c\u7b26\u865f\u4e32\u63a5 Style Path"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"center"},children:(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"#>"})})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"Json Object Style path"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"center"},children:(0,t.jsx)("code",{children:(0,t.jsx)(n.strong,{children:"#>>"})})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"Json Object Style path"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"\u4ee5 Json Object \u53d6\u4ee3\u8def\u5f91"})})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u60c5\u5883"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:'---Specimen\r\n{\r\n        "Class": "Insecta",\r\n        "Genus": {\r\n            "name": "Aedes",\r\n            "Subgenus": {\r\n                "name": "Stegomyia"\r\n            }\r\n        },\r\n        "Order": "Diptera",\r\n        "Family": "Culicidae",\r\n        "Phylum": "Arthropoda",\r\n        "Kingdom": "Animalia",\r\n        "Species": "albopictus"\r\n}\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u7bc4\u4f8b"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"    \r\n    -- original \r\n    select insect.classification -> 'Genus' -> 'Subgenus' -> 'name' sample_name  from insect_specimen insect;\r\n    --Jsonb Object style\r\n    select insect.classification #> '{\"Genus\",\"Subgenus\",\"name\" }' sample_name  from insect_specimen insect;\r\n\r\n    === with index    \r\n    select last_name, raw_data -> 'profile'->'phones'->0  as phone_1 FROM Student\r\n    ===Jsonb Object style. index \u70ba\u6578\u503c\u6545\u6c92 double quotes\r\n    select last_name, raw_data #> '{\"profile\",\"phones\",0}' as phone_1 FROM Student\n"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>c});var r=s(96540);const t={},l=r.createContext(t);function o(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);