"use strict";(self.webpackChunkinsect_totem=self.webpackChunkinsect_totem||[]).push([[2803],{23990:(e,r,l)=>{l.r(r),l.d(r,{assets:()=>i,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"PostgreSQL/Parallel_Query_in_PostgreSQL","title":"Parallel Query in PostgreSQL","description":"Parallel_Query_in_PostgreSQL","source":"@site/docs/14_PostgreSQL/Parallel_Query_in_PostgreSQL.md","sourceDirName":"14_PostgreSQL","slug":"/PostgreSQL/Parallel_Query_in_PostgreSQL","permalink":"/docs/PostgreSQL/Parallel_Query_in_PostgreSQL","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Parallel Query in PostgreSQL","description":"Parallel_Query_in_PostgreSQL","keywords":["postgresql","Parallel Query"]},"sidebar":"totem_sidebar","previous":{"title":"PostgreSQL find value by Attr from JSONB","permalink":"/docs/PostgreSQL/JSONB/Postgresql_find_value_by_Attr_of_JSONB_column"},"next":{"title":"PosgreSQL Backup and Restore","permalink":"/docs/PostgreSQL/PosgreSQL_Backup_and_Restore"}}');var n=l(74848),t=l(28453);const o={title:"Parallel Query in PostgreSQL",description:"Parallel_Query_in_PostgreSQL",keywords:["postgresql","Parallel Query"]},a="Parallel Query in PostgreSQL",i={},c=[];function d(e){const r={a:"a",blockquote:"blockquote",br:"br",h1:"h1",header:"header",li:"li",p:"p",ul:"ul",...(0,t.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.header,{children:(0,n.jsx)(r.h1,{id:"parallel-query-in-postgresql",children:"Parallel Query in PostgreSQL"})}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:"Postgres9.6+ \u5f8c\u958b\u59cb\u63d0\u4f9b CPU \u5e73\u884c\u8655\u7406\u529f\u80fd\u3002"}),"\n",(0,n.jsx)(r.li,{children:"\u7cfb\u7d71\u81ea\u884c\u6c7a\u5b9a\u4f55\u6642\u63a1\u7528 CPU \u5e73\u884c\u904b\u7b97\u3002"}),"\n",(0,n.jsx)(r.li,{children:"\u5728\u81ea\u8cc7\u6599\u5eab\u4e2d\u904e\u6ffe\u51fa\u5c11\u91cf\u8cc7\u6599\u6642\u6548\u80fd\u6703\u6709\u6240\u63d0\u5347\u3002"}),"\n"]}),"\n",(0,n.jsx)(r.h1,{id:"postgres-parallel-query-\u8a2d\u5b9a\u65b9\u5f0f",children:"Postgres Parallel Query \u8a2d\u5b9a\u65b9\u5f0f"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsx)(r.p,{children:"\u66f4\u6539 postgresql.conf max_parallel_workers_per_gather \u53c3\u6578\u5f8c\u91cd\u555f postgres\u3002"}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsx)(r.p,{children:"postgresql.conf"}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(r.blockquote,{children:["\n",(0,n.jsxs)(r.p,{children:["max_parallel_workers_per_gather: \u5927\u65bc 0 \u5373\u53ef, \u4e00\u822c\u70ba 2 ~ 8\u3002\u4f9d\u5be6\u969b  CPU \u72c0\u6cc1\u8abf\u6574\u3002",(0,n.jsx)(r.br,{}),"\n","force_parallel_mode (optional): \u8a2d\u5b9a\u70ba on \u53ef\u5f37\u5236\u7cfb\u7d71\u4f7f\u7528 parallel query\u3002"]}),"\n"]}),"\n",(0,n.jsx)(r.h1,{id:"\u4f7f\u7528\u9650\u5236",children:"\u4f7f\u7528\u9650\u5236"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsx)(r.p,{children:"\u76ee\u524d Postgres9.6 / Postgres10 \u7121\u6cd5\u5728\u4e0b\u5217\u72c0\u6cc1\u4f7f\u7528 Parallel Query"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:"writes any data or locks any database rows, CTE"}),"\n",(0,n.jsx)(r.li,{children:"PL/pgSQL cursor, for loop"}),"\n",(0,n.jsx)(r.li,{children:"user-defined functions are marked PARALLEL UNSAFE by default (can be modified to SAFE)"}),"\n",(0,n.jsx)(r.li,{children:"The transaction isolation level is serializable (\u4e5f\u5c31\u662f\u9023query\u90fd\u6703\u88ablock)"}),"\n",(0,n.jsx)(r.li,{children:"query is running inside of another query"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(r.h1,{id:"\u53c3\u8003\u8cc7\u6599",children:"\u53c3\u8003\u8cc7\u6599:"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.a,{href:"https://www.postgresql.org/docs/10/static/parallel-query.html",children:"\u5b98\u7db2 parallel-query \u8aaa\u660e"})}),"\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.a,{href:"https://blog.rustprooflabs.com/2018/02/pg10_parallel_queries",children:"PostgreSQL 10 Parallel Queries and Performance"})}),"\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.a,{href:"https://www.postgresql.org/docs/current/when-can-parallel-query-be-used.html",children:"https://www.postgresql.org/docs/current/when-can-parallel-query-be-used.html"})}),"\n"]})]})}function u(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},28453:(e,r,l)=>{l.d(r,{R:()=>o,x:()=>a});var s=l(96540);const n={},t=s.createContext(n);function o(e){const r=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),s.createElement(t.Provider,{value:r},e.children)}}}]);