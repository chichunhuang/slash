"use strict";(self.webpackChunktotem=self.webpackChunktotem||[]).push([[218],{3905:(e,n,r)=>{r.d(n,{Zo:()=>p,kt:()=>f});var t=r(67294);function o(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function a(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function s(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?a(Object(r),!0).forEach((function(n){o(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function l(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var i=t.createContext({}),c=function(e){var n=t.useContext(i),r=n;return e&&(r="function"==typeof e?e(n):s(s({},n),e)),r},p=function(e){var n=c(e.components);return t.createElement(i.Provider,{value:n},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},g=t.forwardRef((function(e,n){var r=e.components,o=e.mdxType,a=e.originalType,i=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(r),g=o,f=u["".concat(i,".").concat(g)]||u[g]||d[g]||a;return r?t.createElement(f,s(s({ref:n},p),{},{components:r})):t.createElement(f,s({ref:n},p))}));function f(e,n){var r=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=r.length,s=new Array(a);s[0]=g;var l={};for(var i in n)hasOwnProperty.call(n,i)&&(l[i]=n[i]);l.originalType=e,l[u]="string"==typeof e?e:o,s[1]=l;for(var c=2;c<a;c++)s[c]=r[c];return t.createElement.apply(null,s)}return t.createElement.apply(null,r)}g.displayName="MDXCreateElement"},32420:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>i,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var t=r(87462),o=(r(67294),r(3905));const a={title:"Python Decorator",description:"Python Decorator",keywords:["Python","Decorator"]},s="Python Decorator \u88dd\u98fe\u5668",l={unversionedId:"DevTech/Python/Advanced/Python_2_Decorator",id:"DevTech/Python/Advanced/Python_2_Decorator",title:"Python Decorator",description:"Python Decorator",source:"@site/docs/DevTech/Python/03_Advanced/Python_2_Decorator.md",sourceDirName:"DevTech/Python/03_Advanced",slug:"/DevTech/Python/Advanced/Python_2_Decorator",permalink:"/docs/DevTech/Python/Advanced/Python_2_Decorator",draft:!1,tags:[],version:"current",frontMatter:{title:"Python Decorator",description:"Python Decorator",keywords:["Python","Decorator"]},sidebar:"totem_sidebar",previous:{title:"Python \u5e38\u6578",permalink:"/docs/DevTech/Python/Advanced/Python_2_Constant"},next:{title:"\u95dc\u65bc Python \u6a94\u6848\u7de8\u78bc",permalink:"/docs/DevTech/Python/Advanced/Python_2_Encoding"}},i={},c=[{value:"Function Decorator: Basic",id:"function-decorator-basic",level:2},{value:"Function Decorator :\u6dfb\u52a0 Annotation \u5c6c\u6027",id:"function-decorator-\u6dfb\u52a0-annotation-\u5c6c\u6027",level:2},{value:"Class Decorator: \u4ee5\u985e\u5225\u7ba1\u7406\u591a\u500b decorators",id:"class-decorator-\u4ee5\u985e\u5225\u7ba1\u7406\u591a\u500b-decorators",level:2},{value:"Class Decorator: \u985e\u5225\u7ba1\u7406\u4e0b\u6dfb\u52a0 Annotation \u5c6c\u6027",id:"class-decorator-\u985e\u5225\u7ba1\u7406\u4e0b\u6dfb\u52a0-annotation-\u5c6c\u6027",level:2},{value:"Decorator \u5f8c\u8a18:\u8986\u5beb __call__ \u5efa\u7acb Decorator",id:"decorator-\u5f8c\u8a18\u8986\u5beb-__call__-\u5efa\u7acb-decorator",level:2}],p={toc:c},u="wrapper";function d(e){let{components:n,...r}=e;return(0,o.kt)(u,(0,t.Z)({},p,r,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"python-decorator-\u88dd\u98fe\u5668"},"Python Decorator \u88dd\u98fe\u5668"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5148\u7c21\u55ae\u8aaa\u751a\u9ebc\u662f Decorator Pattern:",(0,o.kt)("br",{parentName:"p"}),"\n","\u5728 Design Pattern \u4e2d\u662f\u9019\u6a23\u8aaa\u660e\u7684\uff0c",(0,o.kt)("br",{parentName:"p"}),"\n","",(0,o.kt)("strong",{parentName:"p"}," ",(0,o.kt)("span",{style:{color:"#0044FF"}},"\u4e00\u7a2e Structural Pattern\uff0c\u5141\u8a31\u5728\u4e0d\u6539\u8b8a\u539f\u59cb\u7a0b\u5f0f\u78bc\u7d50\u69cb\u4e0b\uff0c\u70ba\u65e2\u6709\u7a0b\u5f0f\u589e\u52a0\u65b0\u529f\u80fd\u3002")),(0,o.kt)("br",{parentName:"p"}),"\n","\u770b\u5230\u9019\u8aaa\u660e\u76f4\u89ba\u60f3\u5230\u7684\u61c9\u7528\u662f:",(0,o.kt)("br",{parentName:"p"}),"\n","logging\u3001DB Connection \u6e96\u5099\u3001IO \u6e96\u5099\u7b49\u91cd\u8907\u4e14\u56fa\u5b9a\u7684\u57f7\u884c\u52d5\u4f5c\u3002",(0,o.kt)("br",{parentName:"p"}),"\n","\u6240\u4ee5\u63a5\u4e0b\u4f86\u7684\u4f8b\u5b50\u90fd\u6703\u4ee5\u70ba Business Function \u9032\u884c log \u70ba\u4e3b\u8ef8\u3002  ")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Python \u7684 Decorator \u4e3b\u8981\u9084\u662f Functions\uff0c",(0,o.kt)("br",{parentName:"p"}),"\n","Decorator Functions \u53ef\u4ee5\u662f first-class \u6210\u54e1 Functions\uff0c\u4e5f\u53ef\u4ee5\u662f Class \u7684 Methods\u3002",(0,o.kt)("br",{parentName:"p"}),"\n","Decorators \u9664\u4e86\u55ae\u7d14\u7684\u70ba Business Objects \u6dfb\u52a0\u529f\u80fd\u5916\uff0c\u4e5f\u53ef\u4ee5\u63a5\u6536\u53c3\u6578\u589e\u52a0\u4f7f\u7528\u8b8a\u5316\uff0c",(0,o.kt)("br",{parentName:"p"}),"\n","\u6b64\u5916\uff0c\u4e00\u500b Business Function \u4e5f\u53ef\u4ee5\u88ab\u591a\u500b Decorators \u4fee\u98fe\u3002    ")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u8a3b:  "),(0,o.kt)("ol",{parentName:"blockquote"},(0,o.kt)("li",{parentName:"ol"},"\u9019\u908a\u70ba\u4e86\u65b9\u4fbf\u8a18\u61b6\u8207\u8aaa\u660e\uff0c\u5c07\u4e3b\u89d2\u51a0\u4e0a Decorator/Business \u4f86\u5340\u5206\u88dd\u98fe\u8005\u8207\u88ab\u88dd\u98fe\u8005\u3002  "),(0,o.kt)("li",{parentName:"ol"},"\u53c3\u8003 ",(0,o.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/Aspect-oriented_programming"},"AOP Aspect-Oriented Programming"),"\uff0cAOP \u662f\u4e00\u7a2e\u5e38\u898b\u7684  Decorator Pattern \u7684\u5be6\u4f5c\u3002"),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/Inversion_of_control"},"Inversion of control, IOC")))),(0,o.kt)("h2",{id:"function-decorator-basic"},"Function Decorator: Basic"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Python \u4e2d Business Function \u662f\u4e00\u7d1a\u516c\u6c11\uff0c\u53ef\u4ee5\u7576\u8b8a\u6578\u50b3\u905e\u3002",(0,o.kt)("br",{parentName:"p"}),"\n","\u6240\u4ee5\u6700\u7c21\u55ae\u7684 Decorator \u662f\u63a5\u6536 Business Function\uff0c",(0,o.kt)("br",{parentName:"p"}),"\n","\u4e26\u5728\u57f7\u884c Business \u524d\u57f7\u884c\u6307\u5b9a\u52d5\u4f5c\u3002",(0,o.kt)("br",{parentName:"p"}),"\n","\u4e0b\u9762\u7bc4\u4f8b\uff0c",(0,o.kt)("br",{parentName:"p"}),"\n","Logger \u63a5\u6536 Business Function(login fucn)\uff0c",(0,o.kt)("br",{parentName:"p"}),"\n","\u4e26\u5c07\u76f8\u95dc\u52d5\u4f5c\u5c01\u88dd\u65bc Wrapper Function\uff0c",(0,o.kt)("br",{parentName:"p"}),"\n","\u4e5f\u5c31\u662f\u8aaa login \u52a0\u4e0a @Logger \u4e4b\u5f8c\u6703\u5f97\u5230 wrapper function\u3002",(0,o.kt)("br",{parentName:"p"}),"\n","login function \u6240\u5f97\u5230\u7684\u53c3\u6578\u4e5f\u6703 delegate \u7d66 Wrapper\u3002  ")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"# \u85c9\u7531 Logger \u5c07 Business Function \u5305\u8986\u5728 __Wrapper Function__ \u4e4b\u4e2d\u3002\ndef Logger(business_function):\n    def wrapper(*vArgs, **kwArgs):\n        print(\"-logger: %s method start\" % business_function.__name__)\n        print('vArgs: ', vArgs)\n        print('kwArgs: ', kwArgs)\n        print(\"-Function go~\")\n        result = business_function(*vArgs, **kwArgs)\n        print(\"-logger: %s method end\" % business_function.__name__)\n        return result\n    return wrapper\n\n@Logger\ndef login(username = 'username', pwd ='pwd'):\n    print('user_login')\n    print('username: ' , username)\n    print('pwd: ', pwd)\n\naction = login(username = 'totem', pwd ='password')\n\n# -logger: login method start\n# vArgs:  ()\n# kwArgs:  {'username': 'totem', 'pwd': 'password'}\n# -Function go~\n# user_login\n# username:  totem\n# pwd:  password\n# -logger: login method end\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"\u4e0a\u65b9\u52d5\u4f5c\u7b49\u540c\u65bc")," ",(0,o.kt)("br",null)),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"logger = Logger\nloginExecutor = logger(login)\nloginExecutor(username = 'totem', pwd ='password')\n")),(0,o.kt)("h2",{id:"function-decorator-\u6dfb\u52a0-annotation-\u5c6c\u6027"},"Function Decorator :\u6dfb\u52a0 Annotation \u5c6c\u6027"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"# \u5e36\u53c3\u6578\u7684 Decorator \u8981\u96d9\u5c64\u5c01\u88dd\n# \u4e00\u5c64\u5c01\u88dd Decorator \u6240\u9700\u53c3\u6578\n# \u53e6\u4e00\u5c64\u5c01\u88dd Business Function \ndef Transaction(driver, url, user, pwd):  # \u9019\u908a\u7684\u662f\u74b0\u5883\u6e96\u5099\u6240\u9700\u8cc7\u6599\n    print('Prepare DB Connection driver=%s,url=%s,user=%s,pwd=%s. ' % (driver, url, user, pwd))\n    connection_handler = 'my_db_handler'\n    def decorator(business_fun):\n        @Logger\n        def argsCatcher(*vArgs, **kwArgs):\n            result = business_fun(*vArgs, **kwArgs)\n             print('Disconnect DB by %s.' % connection_handler)\n            return result\n        return argsCatcher\n    return decorator\n\n@Transaction('postgresql', 'db.url.schema','totem', 'pwd')\ndef buy(*vArgs, **kwArgs):\n    print(\"Deal~ Buy All!\")\n\ngift = buy(\"ring\", 'chocolate', 'flowers')\n\n# Prepare DB Connection driver=postgresql,url=db.url.schema,user=totem,pwd=pwd. \n# -logger: argsCatcher method start\n# vArgs:  ('ring', 'chocolate', 'flowers')\n# kwArgs:  {}\n# -Function go~\n# Deal~ Buy All!\n# Disconnect DB by my_db_handler.\n# -logger: argsCatcher method end\n")),(0,o.kt)("h2",{id:"class-decorator-\u4ee5\u985e\u5225\u7ba1\u7406\u591a\u500b-decorators"},"Class Decorator: \u4ee5\u985e\u5225\u7ba1\u7406\u591a\u500b decorators"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u4e0a\u9762\u6709\u63d0\u5230 Annotation Decorator \u53ef\u4ee5\u70ba Business Function \u6dfb\u52a0\u984d\u5916\u529f\u80fd\u8207\u6e96\u5099\u52d5\u4f5c\u3002",(0,o.kt)("br",{parentName:"p"}),"\n","\u800c Decorator \u672c\u8eab\u662f\u4e00\u500b Function\uff0c\u4e0a\u9762\u7684\u4f8b\u5b50\u4e5f\u90fd\u662f\u4e00\u7d1a (first-class) \u6210\u54e1\u51fd\u6578\u7684\u4f8b\u5b50\u3002",(0,o.kt)("br",{parentName:"p"}),"\n","\u63a5\u4e0b\u4f86\u8981\u4ecb\u7d39\u7684\u662f\u7576 Decorator \u4ee5 Class \u70ba host \u6642\u7684\u8655\u7406\u65b9\u5f0f\u3002",(0,o.kt)("br",{parentName:"p"}),"\n","\u5ef6\u7e8c\u4e0a\u9762\u7684\u767c\u60f3\uff0c\u6211\u8a2d\u8a08\u4e86\u4e00\u500b Logger\uff0c",(0,o.kt)("br",{parentName:"p"}),"\n","\u5229\u7528\u534a\u6b98\u7684 Decorator \u5c07\u8cc7\u6599\u8f38\u51fa\u5230\u6307\u5b9a\u4f4d\u7f6e\u3002",(0,o.kt)("br",{parentName:"p"}),"\n","\u5269\u9918\u90e8\u5206\u53ef\u4ee5\u81ea\u884c\u64f4\u5145\u4e0d\u540c\u7684 Printer subclass\u3002  "),(0,o.kt)("p",{parentName:"blockquote"},"\u8a3b:  "),(0,o.kt)("blockquote",{parentName:"blockquote"},(0,o.kt)("p",{parentName:"blockquote"},"\u4e5f\u53ef\u4ee5\u8a66\u8a66\u4ee5 Decorator \u4f86\u505a Form Components \u7684 Validator\uff0c\u9032\u884c\u57fa\u672c\u683c\u5f0f\u6aa2\u67e5\u3002",(0,o.kt)("br",{parentName:"p"}),"\n","\u6216\u662f\u5be6\u4f5c\u505a Web UI Event Handler\uff0c\u70ba event \u64f7\u53d6\u8cc7\u6599\u6216\u8a3b\u518a\u8655\u7406\u51fd\u5f0f\u3002  "))),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Decorator: Print message to somewhere")," ",(0,o.kt)("br",null)),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"# Decorator\nclass Printer:\n    def __init__(self, infoFile='info.txt', errorFile= 'error.txt'):\n        self.infoFile = infoFile\n        self.errorFile = errorFile\n        # alternative ways: prepare mail sender/ console printer/logger server....\n\n    def info(self, dest=''):\n        print('log info to : ', self.infoFile if dest == '' else dest)\n        def fun_wrapper(business_function):\n            def arg_wrapper(*vArgs, **kwArgs):\n                print(\"-logger: %s method start\" % business_function.__name__)\n                print('vArgs: ', vArgs)\n                print('kwArgs: ', kwArgs)\n                print(\"-Function go~\")\n                result = business_function(*vArgs, **kwArgs)\n                print(\"-logger: %s method end\" % business_function.__name__)\n                return result\n            return arg_wrapper\n        return fun_wrapper\n\n    def error(self, dest=''):\n        print('log error to : ', self.errorFile if dest == '' else dest)\n        def fun_wrapper(business_function):\n            def arg_wrapper(*vArgs, **kwArgs):\n                pass # moitted\n            return arg_wrapper\n        return fun_wrapper\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Logger Util: to print and to manage destinations")," ",(0,o.kt)("br",null)),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"# Util Class\nclass Logger:\n    filePrinter = Printer(infoFile='info.txt', errorFile='error.txt')\n    stdoutPrinter = Printer(infoFile='console_info', errorFile='console_error')\n\n    def __init__(self, file=False, std=True):\n        self.toFile = file\n        self.toStd = std\n\n    @filePrinter.info()\n    def info_file(self, *message):\n        print(*message)\n\n    @filePrinter.error()\n    def error_file(self, *message):\n        print(*message)\n\n    @stdoutPrinter.info()\n    def info_std(self, *message):\n        print(*message)\n\n    @stdoutPrinter.error()\n    def error_std(self, *message):\n        print(*message)\n\n    def info(self, *message):\n        print(\"Util info \", message)\n        if self.toFile:\n            self.info_file(message)\n        if self.toStd:\n            self.info_std(message)\n\n    def error(self, *message):\n        print(\"Util error \", *message)\n        if self.toFile:\n            self.error_file(*message)\n        if self.toStd:\n            self.error_std(*message)\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Run test")," ",(0,o.kt)("br",null)),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u7576 \u547c\u53eb logger.info \u6216 logger.error \u6642\u6703\u81ea\u52d5\u4f9d\u64da Logger \u5efa\u7acb\u6642\u7684\u8a2d\u5b9a\u5c07\u8cc7\u6599\u8f38\u51fa\u81f3\u6307\u5b9a\u4f4d\u7f6e  ")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'def hand_shake(device, signal):\n    logger = Logger(file=True, std=True)\n    try:\n        remote_connect()\n        logger.info("Connected")\n    except Exception as e:\n        logger.error("Connection disrupted", str(e), repr(e))\n\nhand_shake("device", "signal")\n')),(0,o.kt)("h2",{id:"class-decorator-\u985e\u5225\u7ba1\u7406\u4e0b\u6dfb\u52a0-annotation-\u5c6c\u6027"},"Class Decorator: \u985e\u5225\u7ba1\u7406\u4e0b\u6dfb\u52a0 Annotation \u5c6c\u6027"),(0,o.kt)("p",null,"\u4e0a\u9762 Decorator \u7bc4\u4f8b\u5176\u5be6\u5df2\u7d93\u6e96\u5099\u597d\u76f8\u95dc\u5de5\u4f5c\u4e86\uff0c\u50c5\u9808\u5728 Util \u547c\u53eb\u6642\u7d66\u4e88\u6578\u6027\u8cea\u4fbf\u53ef\u5be6\u73fe\uff0c",(0,o.kt)("br",null),"\n\u7a0b\u5f0f\u7247\u6bb5\u5982\u4e0b: ",(0,o.kt)("br",null)),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'\n    def info(self, dest=\'\'):\n        # omitted\n\n    @filePrinter.info("customized.log")\n    def info_file(self, *message):\n        print(*message)\n\n    @filePrinter.error("customized_error.log")\n    def error_file(self, *message):\n        print(*message)\n        \n')),(0,o.kt)("h2",{id:"decorator-\u5f8c\u8a18\u8986\u5beb-__call__-\u5efa\u7acb-decorator"},"Decorator \u5f8c\u8a18:\u8986\u5beb ","_","_","call","_","_"," \u5efa\u7acb Decorator"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Decorator \u53ef\u4ee5\u8f14\u52a9 Business Function \u4e26\u57f7\u884c\u67d0\u4e9b\u9644\u52a0\u7684\u52d5\u4f5c\u3002",(0,o.kt)("br",{parentName:"p"}),"\n","Python \u4e2d\u5177\u6709\u57f7\u884c\u80fd\u529b\u7684\u9664\u4e86 Function/Method \u4e4b\u5916\uff0c\u5225\u5fd8\u4e86\u9084\u6709 Constructor\u3002",(0,o.kt)("br",{parentName:"p"}),"\n","\u6240\u4ee5\uff0cDecorator \u9664\u4e86\u4ee5 Function \u4f86\u5be6\u4f5c\u5916\u4e5f\u53ef\u4ee5\u5728\u5efa\u69cb\u6642\u5be6\u4f5c\u3002",(0,o.kt)("br",{parentName:"p"}),"\n","\u6b64\u6642\u9700\u8981\u7684\u662f\u8986\u5beb ","_","_","call","_","_","() \u9019\u500b\u65b9\u6cd5\u3002",(0,o.kt)("br",{parentName:"p"}),"\n","\u4e5f\u5c31\u662f\u4e0d\u660e\u78ba\u7684\u547c\u53eb\u6307\u5b9a\u51fd\u6578\uff0c\u800c\u662f\u96b1\u542b\u7684\u547c\u53eb ","_","_","call","_","_","\u3002",(0,o.kt)("br",{parentName:"p"}),"\n","\u500b\u4eba\u662f\u4e0d\u504f\u597d\u9019\u7a2e\u65b9\u5f0f\u3002\u7562\u7adf\u82e5\u8981\u7528\u5230 Class\uff0c\u57fa\u672c\u4e0a\u61c9\u8a72\u6253\u7b97\u505a\u4e9b\u5c01\u88dd\u7ba1\u7406\u3002",(0,o.kt)("br",{parentName:"p"}),"\n","\u4e5f\u5c31\u662f\u5c07\u591a\u500b\u76f8\u95dc\u7684  Decorators \u653e\u5728\u4e00\u8d77\u7ba1\u7406\u3002",(0,o.kt)("br",{parentName:"p"}),"\n","\u8986\u5beb ","_","_","call","_","_","() \u6709\u9ede\u9055\u53cd\u500b\u4eba\u958b\u767c\u7fd2\u6163\uff0c\u6240\u4ee5\u4e0d\u9019\u9ebc\u505a(\u8a9e\u6cd5\u4e0a\u662f\u53ef\u4ee5\u7684)\u3002",(0,o.kt)("br",{parentName:"p"}),"\n","\u5c0d\u6211\u4f86\u8aaa\u4ed6\u53ea\u6709\u4e00\u500b\u597d\u8655\uff0c\u5c31\u662f Annotation \u5c3e\u7aef\u4e0d\u9700\u8981\u52a0\u4e0a\u5c0f\u62ec\u865f","(",")","\u800c\u5df2\u3002",(0,o.kt)("br",{parentName:"p"}),"\n","\u4e0b\u9762\u662f\u4e00\u500b\u7bc4\u4f8b\uff0c\u4e0d\u591a\u4f5c\u89e3\u91cb...")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Class Decorator : by constructor")," ",(0,o.kt)("br",null)," "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'class DecoratorClass(object):\n    def __init__(self, func):\n        self.func = func\n\n    def __call__(self, *args, **kwargs):\n        print("before call")\n        result = self.func(*args, **kwargs)\n        print("after call")\n        return result\n\n@DecoratorClass # \u9019\u88e1\u4e0d\u662f method, \u6545\u7701\u7565\u4e86 ()\ndef printHelloWorld():\n    print("Hello World")\n\nprintHelloWorld()\n# before call\n# Hello World\n# after call\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Class Decorator : by constructor with annotation attr")," ",(0,o.kt)("br",null)," "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'\nclass DecoratorClass(object):\n    def __init__(self, annotation_attr):\n        self.attr = annotation_attr\n        print("Prepare", self.attr)\n\n    def __call__(self, func):\n        def wrapper(*args, **kwargs):\n            print("before call")\n            result = func(*args, **kwargs)\n            print("after call")\n            return result\n        return wrapper\n\n\n@DecoratorClass("Oracle DB")\ndef saveEntity(entity):\n    print(entity)\n\nscore = saveEntity("Final Exam: 85%")\n# Prepare Oracle DB\n# before call\n# Final Exam: 85%\n# after call\n\n')))}d.isMDXComponent=!0}}]);