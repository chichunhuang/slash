"use strict";(self.webpackChunkinsect_totem=self.webpackChunkinsect_totem||[]).push([[8422],{28453:(e,r,s)=>{s.d(r,{R:()=>l,x:()=>c});var t=s(96540);const n={},o=t.createContext(n);function l(e){const r=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:l(e.components),t.createElement(o.Provider,{value:r},e.children)}},87652:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>a,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>t,toc:()=>i});const t=JSON.parse('{"id":"PostgreSQL/PosgreSQL_Backup_and_Restore","title":"PosgreSQL Backup and Restore","description":"PosgreSQL \u5099\u4efd\u8207\u9084\u539f\u7bc4\u4f8b","source":"@site/docs/14_PostgreSQL/PosgreSQL_Backup_and_Restore.md","sourceDirName":"14_PostgreSQL","slug":"/PostgreSQL/PosgreSQL_Backup_and_Restore","permalink":"/docs/PostgreSQL/PosgreSQL_Backup_and_Restore","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"PosgreSQL Backup and Restore","description":"PosgreSQL \u5099\u4efd\u8207\u9084\u539f\u7bc4\u4f8b","keywords":["backup","restore","postgresql"]},"sidebar":"totem_sidebar","previous":{"title":"Parallel Query in PostgreSQL","permalink":"/docs/PostgreSQL/Parallel_Query_in_PostgreSQL"},"next":{"title":"PosgreSQL copy CSV to table","permalink":"/docs/PostgreSQL/PosgreSQL_copy_CSV_to_table"}}');var n=s(74848),o=s(28453);const l={title:"PosgreSQL Backup and Restore",description:"PosgreSQL \u5099\u4efd\u8207\u9084\u539f\u7bc4\u4f8b",keywords:["backup","restore","postgresql"]},c="PosgreSQL \u5099\u4efd\u8207\u9084\u539f\u7bc4\u4f8b",a={},i=[];function d(e){const r={code:"code",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.header,{children:(0,n.jsx)(r.h1,{id:"posgresql-\u5099\u4efd\u8207\u9084\u539f\u7bc4\u4f8b",children:"PosgreSQL \u5099\u4efd\u8207\u9084\u539f\u7bc4\u4f8b"})}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:"pg_dump \u6307\u4ee4\u5099\u4efd"}),"\n",(0,n.jsx)(r.li,{children:"pg_restore \u6307\u4ee4\u56de\u5b58"}),"\n",(0,n.jsx)(r.li,{children:"Database \u91cd\u5efa\u7bc4\u4f8b"}),"\n"]}),"\n",(0,n.jsx)(r.h1,{id:"pg_dump-\u6307\u4ee4\u5099\u4efd",children:"pg_dump \u6307\u4ee4\u5099\u4efd"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-sql",children:"pg_dump -U totem -F t -b -v -f totem1.tar totem\n"})}),"\n",(0,n.jsx)(r.h1,{id:"pg_restore-\u6307\u4ee4\u56de\u5b58",children:"pg_restore \u6307\u4ee4\u56de\u5b58"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"pg_restore -U totem -F t -d totem -i -v totem.tar\n"})}),"\n",(0,n.jsx)(r.h1,{id:"database-\u91cd\u5efa\u6307\u4ee4",children:"Database \u91cd\u5efa\u6307\u4ee4"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsx)(r.p,{children:"\u6e96\u5099\u6307\u4ee4\u6a94 rebuild.sql"}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsx)(r.p,{children:"\u57f7\u884c rebuild.sql \u65b9\u5f0f"}),"\n",(0,n.jsx)(r.p,{children:"\u5c07\u4e0b\u5217\u6307\u4ee4\u653e\u5165 rebuild.sql \u4e2d"}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-sql",children:"drop database totem;\r\n\r\nCREATE DATABASE totem\r\n  WITH ENCODING='UNICODE'\r\n       OWNER=totem\r\n       TEMPLATE=template0\r\n       TABLESPACE=totem;\r\n\\c totem;\r\n       \r\nALTER SCHEMA public OWNER TO totem;\n"})}),"\n",(0,n.jsx)(r.p,{children:"psql \u57f7\u884c sql script \u6a94\u7bc4\u4f8b"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-shell",children:"psql -U postgres -f rebuild.sql\r\n\n"})})]})}function p(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}}}]);