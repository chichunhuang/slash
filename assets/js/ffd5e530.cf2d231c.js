"use strict";(globalThis.webpackChunkinsect_totem=globalThis.webpackChunkinsect_totem||[]).push([[9977],{28453:(n,e,s)=>{s.d(e,{R:()=>c,x:()=>i});var a=s(96540);const r={},t=a.createContext(r);function c(n){const e=a.useContext(t);return a.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:c(n.components),a.createElement(t.Provider,{value:e},n.children)}},75635:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>l,contentTitle:()=>i,default:()=>o,frontMatter:()=>c,metadata:()=>a,toc:()=>h});const a=JSON.parse('{"id":"Scala/Scala_Switch","title":"Scala Switch Case","description":"Scala Pattern Matching","source":"@site/docs/145_Scala/055_Scala_Switch.md","sourceDirName":"145_Scala","slug":"/Scala/Scala_Switch","permalink":"/docs/Scala/Scala_Switch","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":55,"frontMatter":{"title":"Scala Switch Case","description":"Scala Pattern Matching","keywords":["Scala","switch"]},"sidebar":"totem_sidebar","previous":{"title":"Scala \u8ff4\u5708","permalink":"/docs/Scala/Scala_Loop"},"next":{"title":"Scala Traits and Self Type","permalink":"/docs/Scala/Scala_Trait_SelfType"}}');var r=s(74848),t=s(28453);const c={title:"Scala Switch Case",description:"Scala Pattern Matching",keywords:["Scala","switch"]},i=void 0,l={},h=[{value:"Scala Pattern Matching (Switch Case)",id:"scala-pattern-matching-switch-case",level:2},{value:"Scala try/catch Matching",id:"scala-trycatch-matching",level:3},{value:"Scala Case Classes (<code><strong>Case Classes</strong></code>  \u4f8b\u985e, ch9)",id:"scala-case-classes-case-classes--\u4f8b\u985e-ch9",level:3}];function d(n){const e={code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{id:"scala-pattern-matching-switch-case",children:"Scala Pattern Matching (Switch Case)"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u4ee5 function \u4f86\u56de\u50b3 matching \u7d50\u679c"}),"\n",(0,r.jsx)(e.li,{children:"\u5c07 matching \u7d50\u679c\u76f4\u63a5\u9935\u7d66 variable"}),"\n",(0,r.jsxs)(e.li,{children:["\u53ef ",(0,r.jsx)("code",{children:(0,r.jsx)(e.strong,{children:"\u6df7\u7528\u4e0d\u540c\u578b\u5225"})}),"\u7684 matching key"]}),"\n",(0,r.jsx)(e.li,{children:"\u53ef\u540c\u6642 matching + desctruciotn"}),"\n",(0,r.jsxs)(e.li,{children:["\u5176\u4ed6 :","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u4e0d\u9808 break"}),"\n",(0,r.jsxs)(e.li,{children:["default \u4f7f\u7528 ",(0,r.jsx)("code",{children:"_"})]}),"\n",(0,r.jsxs)(e.li,{children:["\u53ef\u642d\u914d ",(0,r.jsx)("code",{children:(0,r.jsx)(e.strong,{children:"|"})})," (or)\u4f7f\u7528, \u540c\u6642 match \u591a\u500b conditions"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"switch \u672c\u8eab\u662f\u4e00\u7a2e expression"}),"\n",(0,r.jsx)(e.li,{children:"\u53ef\u4ee5\u8207 option \u642d\u914d\u4f7f\u7528"}),"\n",(0,r.jsxs)(e.li,{children:["@switch:","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"scala switch \u5728 JVM \u4e2d\u6709\u53ef\u80fd\u88ab\u8f49\u63db\u6210 tableswitch, lookupswitch \u751a\u81f3\u662f a series of conditional expressions"}),"\n",(0,r.jsx)(e.li,{children:"\u4f7f\u7528 @switch \u53ef\u4ee5\u5728 compile \u904e\u7a0b\u4e2d\u63d0\u4f9b warning, \u82e5 switch \u88ab\u8f49\u63db\u6210\u4e00\u7cfb\u5217\u7684 conditions \u6642."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["Pattern Matching \u904e\u7a0b\u4e2d\u53ef\u4ee5 destruct input.","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"List: \u5229\u7528 ::, \u6216 List(first, _*)"}),"\n",(0,r.jsx)(e.li,{children:"Class: Typed pattern"}),"\n",(0,r.jsx)(e.li,{children:"Tuple"}),"\n",(0,r.jsx)(e.li,{children:"Sequence"}),"\n",(0,r.jsx)(e.li,{children:"Variable"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.em,{children:(0,r.jsx)(e.strong,{children:"Switch Syntax"})})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"   //match syntax\r\n   \r\n   varName match {\r\n   \r\n       case value               => do()\r\n       case type: TypeClass     => do()\r\n       case condition           => do()\r\n       case choices | C2        => do()\r\n       case varInst @ TypeClass => do()\r\n       case Constructor(a,b)    => do()\r\n   }\r\n   \r\n   \n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.em,{children:(0,r.jsx)(e.strong,{children:"\u4f7f\u7528\u65b9\u5f0f"})})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:'\r\n    //function \u4f86\u56de\u50b3 matching \u7d50\u679c\r\n    def getNumber(num:Int) : String = { num match {\r\n          case 1 | 3 | 5 => "odd"\r\n          case 2 | 4 | 6 => "evens"\r\n          case _ => "null"\r\n          }\r\n    } \r\n    \r\n    //matching \u7d50\u679c\u76f4\u63a5\u9935\u7d66 variable\r\n    var x = 1;\r\n    val month : String = x match {\r\n      case 1 => "Jan."\r\n      case 2 => "Feb."\r\n      case 3 => "Mar."\r\n      case _ => "Not Spring"\r\n    }\r\n    \r\n    //\u6df7\u7528 matching key \u7684\u578b\u5225\r\n    def getMultiType(x: Any) = x match {\r\n      case true => "truth"\r\n      case \'a\' | \'A\' => "this is a"\r\n      case x :: xs => "List"\r\n      case Nil => "empty List"\r\n      case _ => "null"\r\n    }     \r\n    \r\n    // Any matching + destruction\r\n    def getMultiMatchType(x: Any): String = x match {\r\n        // sequence patterns, \u6ce8\u610f \u9019\u908a\u4f7f\u7528\u5c0f\u62ec\u865f. Scala \u4e2d\u62ec\u865f\u662f\u6cdb\u578b\r\n        case List(0, _, _) => "List has three element first is 0 "\r\n        case List(1, _*) => "List element size is dynamic, \u7b2c\u4e00\u500b\u503c\u662f 1 "\r\n        \r\n        //variable patterns: \u53ef\u4ee5\u53d6\u5f97\u50b3\u5165\u7684 key\r\n        case x @ List(1, _*) => s"$x" //\u53ef\u4ee5\u53d6\u5f97\u7b2c\u4e00\u500b\u503c\u70ba 1 \u7684 list instance x\r\n        \r\n        //tuples\r\n        case (a, b) => s"Tuple2 $a and $b"\r\n        case (a, b, c) => s"Tuple2 $a, $b, and $c"\r\n        \r\n        // typed patterns\r\n        case s: String => s"this is string: $s"\r\n        case i: Int => s"this is int: $i"\r\n        case f: Float => s"this is float: $f"\r\n        case a: Array[Int] => s"an array of int: ${a.mkString(",")}"\r\n        case as: Array[String] => s"an array of strings: ${as.mkString(",")}"\r\n        case list: List[_] => s"this the List: $list"\r\n        case m: Map[_, _] => m.toString\r\n        \r\n        // constructor patterns\r\n        case Person(first, "Alexander") => s"found an Alexander, first name = $first"\r\n        \r\n        // the default wildcard pattern\r\n        case _ => ""\r\n    }\r\n    \r\n    //@switch: \u589e\u52a0\u6548\u80fd\r\n    var x = 1;\r\n    val month : String = x: @switch match {\r\n      case 1 => "Jan."\r\n      case 2 => "Feb."\r\n      case 3 => "Mar."\r\n      case _ => "Not Spring"\r\n    }\r\n   \n'})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Scala Variable Patterns","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u53ef\u4ee5\u53d6\u5f97\u50b3\u5165\u7684 instance"}),"\n",(0,r.jsx)(e.li,{children:"case \u5f8c\u7684\u8a9e\u6cd5\u70ba variableName @ pattern"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:'     def getMultiMatchType(x: Any): String = x match {\r\n                   \r\n            //variable patterns: \u53ef\u4ee5\u53d6\u5f97\u50b3\u5165\u7684 key\r\n            case x @ List(1, _*) => s"$x" //\u53ef\u4ee5\u53d6\u5f97\u7b2c\u4e00\u500b\u503c\u70ba 1 \u7684 list instance x\r\n            case x @ Some(_) => s"$x" // works, returns "Some(foo)"\r\n            case p @ Person(first, "Doe") => s"$p" // works, returns "Person(John,Doe)"\r\n            \r\n            // sequence patterns, \u6ce8\u610f \u9019\u908a\u6c92\u8fa6\u6cd5\u53d6\u5f97\u50b3\u5165\u503c (\u975e @ syntax)\r\n            case List(0, _, _) => "List has three element first is 0 "\r\n            case List(1, _*) => "List element size is dynamic, \u7b2c\u4e00\u500b\u503c\u662f 1 "\r\n            \r\n            case _ => ""\r\n     }   \r\n   \n'})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Scala Destruction Patterns"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Variable pattern \u53ef\u4ee5\u76f4\u63a5\u53d6\u5f97\u50b3\u5165\u7684 instance , \u6700\u4f73\u6700\u901a\u7528\u89e3\u6cd5"}),"\n",(0,r.jsx)(e.li,{children:"Constructors/Tuples/Type patterns. \u53ef\u4ee5\u89e3\u69cb\u4e26\u53d6\u5f97\u7279\u5b9a\u7684\u8cc7\u6599 (\u6709\u8b8a\u6578\u627f\u63a5), \u53ef\u4ee5\u7528\u4f86\u53d6\u4ee3 isInstanceOf"}),"\n",(0,r.jsx)(e.li,{children:"Sequence/Constant patterns \u53ea\u80fd matching"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Scala Switch Patterns: \u57fa\u672c\u4e0a\u53ef\u5206\u70ba:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Constant patterns"}),"\n",(0,r.jsx)(e.li,{children:"Constructor patterns"}),"\n",(0,r.jsx)(e.li,{children:"Sequence patterns(\u53ef\u4ee5\u9032\u884c destruction)"}),"\n",(0,r.jsx)(e.li,{children:"Tuple patterns"}),"\n",(0,r.jsx)(e.li,{children:"Type patterns(\u53ef\u4ee5\u53d6\u5f97\u50b3\u5165\u7684 key)"}),"\n",(0,r.jsx)(e.li,{children:"Variable patterns(\u53ef\u4ee5\u53d6\u5f97\u50b3\u5165\u7684 key, @)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Scala Switch \u8207 if expressions(Guards) \u5408\u4f75\u4f7f\u7528"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"case \u7684 identifier (a,b,c) \u53ea\u662f\u7528\u4f86\u5340\u5206\u662f\u54ea\u4e00\u500b case.\u53ef\u4ee5\u4efb\u610f\u547d\u540d."}),"\n",(0,r.jsx)(e.li,{children:"case \u7684 identifier \u662f\u4e00\u500b\u8b8a\u6578, \u6307\u5411\u50b3\u5165\u7684\u3000input \u8b8a\u6578"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:'   // \u689d\u4ef6\u5f0f\u5224\u65b7,\u5340\u9593\u5224\u65b7, \u5229\u7528 Range \u7684 contains \u56de\u50b3 boolean\r\n     def guard (input: Int) : Unit = input match {\r\n      case a if 0 to 9 contains a   => println("0-9 range: " + a)\r\n      case b if 10 to 19 contains b => println("10-19 range: " + b)\r\n      case c if 20 to 29 contains c => println("20-29 range: " + c)\r\n      case _ => println("Hmmm...")\r\n    }\r\n   \r\n   // \u5229\u7528 class fields \u8207 guard \u5408\u4f5c\r\n    class Stock(val symbol: String, val price: Int)\r\n    def guard3(stock: Stock): String = stock match {\r\n      case a if stock.price < 100 => stock.price + " between 0 to 100"\r\n      case b if     b.price < 200 => b.price + " between 100 to 200"\r\n      case _ => "more than 200"\r\n    }\r\n\r\n    guard3(new Stock("A", 10))\n'})}),"\n",(0,r.jsx)(e.h3,{id:"scala-trycatch-matching",children:"Scala try/catch Matching"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Scala \u8a9e\u6cd5\u4e2d, try/catch \u53ef\u4ee5\u8207 matching \u5408\u4f75\u4f7f\u7528","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u4e5f\u5c31\u662f Java \u5c31\u8a9e\u6cd5\u4e2d\u7684 multiple catches \u8a9e\u6cd5\u7684\u7c21\u5316\u7248"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\u8207 Typed pattern \u7684\u8a9e\u6cd5\u76f8\u540c, \u9700\u8981\u52a0\u5192\u865f","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"syntax: case ex: Type => do()"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:'    try {\r\n      openAndReadAFile(filename)\r\n    } catch {\r\n      case e: FileNotFoundException => println("Couldn\'t find that file.")\r\n      case e: IOException => println("Had an IOException trying to read that file")\r\n    }\n'})}),"\n",(0,r.jsxs)(e.h3,{id:"scala-case-classes-case-classes--\u4f8b\u985e-ch9",children:["Scala Case Classes (",(0,r.jsx)("code",{children:(0,r.jsx)(e.strong,{children:"Case Classes"})}),"  \u4f8b\u985e, ch9)"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u7279\u6027","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u53ef\u4ee5\u7528\u5728 pattern matching \u7684\u985e\u5225"}),"\n",(0,r.jsx)(e.li,{children:"\u985e\u4f3c Java enum \u7684\u529f\u7528, \u5229\u7528 factory method \u5efa\u69cb, \u4e0d\u9700 new"}),"\n",(0,r.jsx)(e.li,{children:"\u985e\u4f3c Java bean \u7684\u529f\u7528, \u53ef\u7528\u65bc\u5132\u5b58\u6578\u64da"}),"\n",(0,r.jsxs)(e.li,{children:["\u6709\u591a\u500b\u7528\u4f86\u81ea\u52d5\u751f\u6210\u7684 apply \u65b9\u6cd5, \u5efa\u69cb\u5b50(apply)\u7684 ",(0,r.jsx)("code",{children:(0,r.jsx)(e.strong,{children:"class params \u9810\u8a2d\u70ba val"})}),', \u53ef\u4ee5\u7701\u7565 "val", \u82e5\u8981 setter var \u5247\u9700\u81ea\u884c\u52a0\u4e0a']}),"\n",(0,r.jsx)(e.li,{children:"Scala Class \u7684 constructor params \u9810\u8a2d\u4e5f\u70ba val."}),"\n",(0,r.jsx)(e.li,{children:"\u53ef\u6709 companion object \u4f34\u751f\u5c0d\u8c61(\u53c3\u95b1 Scala Auxiliary Constructor)"}),"\n",(0,r.jsx)(e.li,{children:"\u9810\u8a2d\u81ea\u52d5\u5e6b\u5fd9\u5efa\u7acb toString, hashCode, equals, copy \u7b49\u65b9\u6cd5"}),"\n",(0,r.jsx)(e.li,{children:"\u6ce8\u610f Case \u56e0\u70ba\u662f\u4e00\u7a2e\u7279\u6b8a\u7684 Class, \u6240\u4ee5\u8a9e\u6cd5\u4e0a\u6709\u52a0 class"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\u7528\u9014","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u7576\u5feb\u901f\u751f\u6210 java bean \u7528(\u57fa\u672c equals, hash \u90fd\u6709\u4e86)"}),"\n",(0,r.jsx)(e.li,{children:"Pattern matching \u6642\u4f7f\u7528,(\u540c\u6a23 equals, hash \u90fd\u6709\u4e86)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:'    //Scala Case Class\r\n    //default val\r\n    case class  Student2 (val code: String, name: String) {\r\n    }\r\n    \r\n    val mary = Student2("A","Mary")\r\n    val john = Student2("A","Mary")\r\n    \r\n    //default equals\r\n    println(mary.equals(john))\r\n    \r\n    //\u7528\u5728 Matching\r\n    def checkStudent(s: Student2) =  s match {\r\n      case Student2("A","Mary") => "Mary"\r\n      case Student2("B","John") => "John"\r\n      case _ => "Who are you?"\r\n    }\r\n    println( checkStudent(mary))  \n'})})]})}function o(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}}}]);