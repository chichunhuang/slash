"use strict";(self.webpackChunkinsect_totem=self.webpackChunkinsect_totem||[]).push([[9426],{28453:(e,s,t)=>{t.d(s,{R:()=>o,x:()=>i});var n=t(96540);const r={},l=n.createContext(r);function o(e){const s=n.useContext(l);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),n.createElement(l.Provider,{value:s},e.children)}},74199:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"PostgreSQL/PosgreSQL_Backup_and_Restore","title":"PostgreSQL \u5099\u4efd\u8207\u9084\u539f\u7bc4\u4f8b","description":"PostgreSQL Backup and Restore","source":"@site/docs/140_PostgreSQL/PosgreSQL_Backup_and_Restore.md","sourceDirName":"140_PostgreSQL","slug":"/PostgreSQL/PosgreSQL_Backup_and_Restore","permalink":"/docs/PostgreSQL/PosgreSQL_Backup_and_Restore","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"PostgreSQL \u5099\u4efd\u8207\u9084\u539f\u7bc4\u4f8b","description":"PostgreSQL Backup and Restore","keywords":["backup","restore","postgresql"]},"sidebar":"totem_sidebar","previous":{"title":"PostgreSQL \u5e73\u884c\u67e5\u8a62","permalink":"/docs/PostgreSQL/Parallel_Query_in_PostgreSQL"},"next":{"title":"Postgres \u5141\u8a31 Client \u9023\u7dda\u8a2d\u5b9a","permalink":"/docs/PostgreSQL/PostgreSQL_Client_Access"}}');var r=t(74848),l=t(28453);const o={title:"PostgreSQL \u5099\u4efd\u8207\u9084\u539f\u7bc4\u4f8b",description:"PostgreSQL Backup and Restore",keywords:["backup","restore","postgresql"]},i=void 0,c={},d=[{value:"PostgreSQL \u5099\u4efd\u8207\u9084\u539f\u7bc4\u4f8b",id:"postgresql-\u5099\u4efd\u8207\u9084\u539f\u7bc4\u4f8b",level:2},{value:"pg_dump \u6307\u4ee4\u5099\u4efd",id:"pg_dump-\u6307\u4ee4\u5099\u4efd",level:2},{value:"Database \u91cd\u5efa\u6307\u4ee4",id:"database-\u91cd\u5efa\u6307\u4ee4",level:2},{value:"pg_restore \u6307\u4ee4\u56de\u5b58",id:"pg_restore-\u6307\u4ee4\u56de\u5b58",level:2}];function a(e){const s={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h2,{id:"postgresql-\u5099\u4efd\u8207\u9084\u539f\u7bc4\u4f8b",children:"PostgreSQL \u5099\u4efd\u8207\u9084\u539f\u7bc4\u4f8b"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"pg_dump \u6307\u4ee4\u5099\u4efd"}),"\n",(0,r.jsx)(s.li,{children:"pg_restore \u6307\u4ee4\u56de\u5b58"}),"\n",(0,r.jsx)(s.li,{children:"Database \u91cd\u5efa\u7bc4\u4f8b"}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"pg_dump-\u6307\u4ee4\u5099\u4efd",children:"pg_dump \u6307\u4ee4\u5099\u4efd"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["-U",":user"," name"]}),"\n",(0,r.jsxs)(s.li,{children:["-F c",":dump","\u6a94\u683c\u5f0f\u70ba custom, \u53ef\u4ee5\u9023\u5728\u4e00\u8d77 -Fc"]}),"\n",(0,r.jsxs)(s.li,{children:["-F t",":dump","\u6a94\u683c\u5f0f\u70ba tar"]}),"\n",(0,r.jsx)(s.li,{children:"-b: \u9023 blob table \u4e00\u8d77 dump"}),"\n",(0,r.jsx)(s.li,{children:"-v: verbose"}),"\n",(0,r.jsx)(s.li,{children:"-f: file"}),"\n",(0,r.jsx)(s.li,{children:"\u6700\u5f8c\u9762\u63a5\u7684 option \u662f db name"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"    pg_dump -U totem -F t -b -v -f totem1.tar totem\n"})}),"\n",(0,r.jsx)(s.h2,{id:"database-\u91cd\u5efa\u6307\u4ee4",children:"Database \u91cd\u5efa\u6307\u4ee4"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"\u6e96\u5099\u6307\u4ee4\u6a94 rebuild.sql"}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"\u57f7\u884c rebuild.sql \u65b9\u5f0f"}),"\n",(0,r.jsx)(s.p,{children:"\u5c07\u4e0b\u5217\u6307\u4ee4\u653e\u5165 rebuild.sql \u4e2d"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"    drop database totem;\r\n    \r\n    CREATE DATABASE totem\r\n      WITH ENCODING='UTF8'\r\n           OWNER=totem\r\n           TEMPLATE=template0\r\n           TABLESPACE=totem;\r\n    \\c totem;\r\n           \r\n    ALTER SCHEMA public OWNER TO totem;\n"})}),"\n",(0,r.jsx)(s.p,{children:"psql \u57f7\u884c sql script \u6a94\u7bc4\u4f8b"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-shell",children:"    psql -U postgres -f rebuild.sql\n"})}),"\n",(0,r.jsx)(s.h2,{id:"pg_restore-\u6307\u4ee4\u56de\u5b58",children:"pg_restore \u6307\u4ee4\u56de\u5b58"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"-i: \u53ef\u4e0d\u7ba1\u7248\u672c\u5f37\u5236\u56de\u5b58"}),"\n",(0,r.jsx)(s.li,{children:"-h: host"}),"\n",(0,r.jsx)(s.li,{children:"-p: port"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"    pg_restore -U totem -F t -d totem -i -v totem.tar\n"})})]})}function p(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);