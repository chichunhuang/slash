"use strict";(globalThis.webpackChunkinsect_totem=globalThis.webpackChunkinsect_totem||[]).push([[6005],{28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>i});var c=t(96540);const s={},a=c.createContext(s);function r(e){const n=c.useContext(a);return c.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),c.createElement(a.Provider,{value:n},e.children)}},82178:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>c,toc:()=>l});const c=JSON.parse('{"id":"Javascript/React/React_async","title":"React useEffect","description":"React useEffect","source":"@site/docs/120_Javascript/React/052_React_async.md","sourceDirName":"120_Javascript/React","slug":"/Javascript/React/React_async","permalink":"/docs/Javascript/React/React_async","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":52,"frontMatter":{"title":"React useEffect","description":"React useEffect","keywords":["javascript","useEffect","async"]},"sidebar":"totem_sidebar","previous":{"title":"React \u6838\u5fc3\u904b\u4f5c\u6982\u5ff5","permalink":"/docs/Javascript/React/React_Exe"},"next":{"title":"State children \u8b8a\u6578","permalink":"/docs/Javascript/React/React_children_var"}}');var s=t(74848),a=t(28453);const r={title:"React useEffect",description:"React useEffect",keywords:["javascript","useEffect","async"]},i=void 0,o={},l=[{value:"React \u4e2d\u4f7f\u7528 async \u60c5\u5883",id:"react-\u4e2d\u4f7f\u7528-async-\u60c5\u5883",level:2},{value:"React \u4e2d\u7684 UI Component",id:"react-\u4e2d\u7684-ui-component",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",br:"br",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"./../async",children:"JavaScript async \u57fa\u672c"})}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["async \u7684\u76ee\u7684\uff0c\u662f\u70ba\u4e86\u8b93\u4f60\u53ef\u4ee5\u5728\u51fd\u5f0f\u5167 ",(0,s.jsx)("span",{style:{color:"#0044FF"},children:(0,s.jsx)(n.strong,{children:"\u4ee5\u540c\u6b65\u7684\u5beb\u6cd5\u8655\u7406\u975e\u540c\u6b65(\u5e73\u884c\u57f7\u884c)\u6d41\u7a0b"})})]}),"\n",(0,s.jsxs)(n.p,{children:["React \u4e2d\u4f7f\u7528 async \u8a9e\u6cd5\u6642\uff0c\u56e0\u70ba await \u56de\u50b3\u7684\u662f Promise\uff0c\u800c\u975e JSX\u3002",(0,s.jsx)(n.br,{}),"\n","\u4f46\u662f React Component \u5fc5\u9808\u56de\u50b3 JSX\uff0c\u65bc\u662f React \u4fbf\u4ee5 ",(0,s.jsx)("span",{style:{color:"#FF1100"},children:(0,s.jsx)(n.strong,{children:"useEffect Hook"})})," \u4f86\u5c01\u88dd\u8207\u7ba1\u7406\u56de\u50b3\u7684 Promise \u4e26\u9069\u7576\u5730\u8f49\u63db\u6210 JSX\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"react-\u4e2d\u4f7f\u7528-async-\u60c5\u5883",children:"React \u4e2d\u4f7f\u7528 async \u60c5\u5883"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u8655\u7406 API Request\u3002\u7b49\u5f85\u9060\u7aef\u4f3a\u670d\u5668\u56de\u61c9\u6642\u4f7f\u7528\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'    async function fetchData() {\r\n      const res = await fetch("/api/data")\r\n      const data = await res.json()\r\n      setData(data)\r\n    }\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u4e8b\u4ef6\u8655\u7406\u5668\u4e2d\u4f7f\u7528\u975e\u540c\u6b65\uff0c\u7b49\u5f85\u5be6\u969b\u5e73\u884c\u52d5\u4f5c\u7d50\u675f\u5f8c\u624d\u5f80\u5f8c\u8d70\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'    function Button() {\r\n      const handleClick = async () => {\r\n        await saveData()\r\n        alert("\u5132\u5b58\u5b8c\u6210")\r\n      }\r\n    \r\n      return <button onClick={handleClick}>Save</button>\r\n    }\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u642d\u914d try catch \u8655\u7406\u932f\u8aa4\uff0c\u4ee5\u540c\u6b65\u8a9e\u6cd5\u65b9\u5f0f\u8655\u7406\u975e\u540c\u6b65\u932f\u8aa4\uff0c\u4ee5\u65b9\u4fbf\u95b1\u8b80"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'    async function loadUser() {\r\n      try {\r\n        const res = await fetch("/api/user")\r\n        const user = await res.json()\r\n        setUser(user)\r\n      } catch (err) {\r\n        setError(err)\r\n      }\r\n    }\n'})}),"\n",(0,s.jsx)(n.h2,{id:"react-\u4e2d\u7684-ui-component",children:"React \u4e2d\u7684 UI Component"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"React \u5728\u5be6\u4f5c Component \u6642\u4e5f\u5e38\u4ee5 function \u4f5c\u70ba\u7d50\u69cb\u5b9a\u7fa9\u3002\u800c\u6b64\u6642 js function \u56de\u50b3\u7684\u5fc5\u9808\u662f JSX\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u7576 Component \u7684 state \u9808\u7531\u5176\u4ed6 API Server \u53d6\u5f97\u6642\uff0c\u5247\u4e0d\u53ef\u76f4\u63a5\u5728 function \u524d\u52a0\u4e0a async\uff0c\u56e0\u70ba UI Component \u56de\u50b3\u7684\u5fc5\u9808\u662f JSX \u800c\u4e0d\u662f Promise\u3002"}),"\n",(0,s.jsx)(n.li,{children:"React \u63d0\u4f9b useEffect Hook \u4f86\u8655\u7406\u975e\u540c\u6b65\u52d5\u4f5c\u884c\u70ba\u3002"}),"\n",(0,s.jsx)(n.li,{children:"React \u67b6\u69cb\u4e0b\u5c07 async \u52d5\u4f5c\u50b3\u7d66 useEffect\uff0c\u7531 React \u4f86\u7ba1\u7406\u7570\u6b65\u64cd\u4f5c\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"    function MyComponent() {\r\n      useEffect(() => {\r\n        async function fetchData() {\r\n          const res = await fetch(...)\r\n          setData(res)\r\n        }\r\n        fetchData()\r\n      }, [])\r\n    }\n"})})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);